<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="id"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;Panduan Trading Kripto Interaktif&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.jsdelivr.net/npm/chart.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Chosen Palette: Warm Neutrals --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Application Structure Plan: Aplikasi ini dirancang sebagai SPA (Single-Page Application) dengan navigasi sidebar tetap dan area konten dinamis. Struktur ini mengubah laporan linear menjadi alat pembelajaran modular yang berpusat pada tugas. Daripada menggulir dokumen yang panjang, pengguna dapat dengan bebas melompat antara 'Dasar Kripto' untuk teori, 'Arena Analisis' untuk praktik langsung dengan grafik, 'Pustaka Pola' sebagai referensi visual, dan 'Perisai Trader' untuk manajemen risiko. Pendekatan ini jauh lebih menarik dan tidak terlalu mengintimidasi bagi audiens pemula (usia 14 tahun), mendorong eksplorasi aktif daripada konsumsi pasif dan menjadikan 'Arena Analisis' sebagai pusat pengalaman belajar. --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Visualization &amp; Content Choices:<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>- [Laporan: Analisis Teknis] -&gt; [Goal: Pembelajaran Praktis] -&gt; [Viz: Grafik Interaktif] -&gt; [Interaction: Pilih koin, aktifkan/nonaktifkan indikator (MA, RSI, MACD, BB)] -&gt; [Justification: Memberi pengguna pengalaman langsung dalam menerapkan konsep TA, yang jauh lebih efektif daripada hanya membaca deskripsi.] -&gt; [Library: Chart.js]</p>
<p class="p1"><span class="Apple-converted-space">        </span>- [Laporan: Pola Candlestick/Grafik] -&gt; [Goal: Referensi Cepat] -&gt; [Viz: Kartu Visual] -&gt; [Interaction: Klik kartu untuk melihat detail dan ilustrasi HTML/CSS] -&gt; [Justification: Mengubah tabel statis menjadi panduan visual yang menarik dan mudah dicerna.] -&gt; [Library: HTML/CSS/JS]</p>
<p class="p1"><span class="Apple-converted-space">        </span>- [Laporan: Manajemen Risiko] -&gt; [Goal: Alat Praktis] -&gt; [Viz: Kalkulator] -&gt; [Interaction: Input pengguna untuk menghitung Rasio Risiko-Imbalan &amp; Ukuran Posisi secara real-time] -&gt; [Justification: Menerjemahkan konsep abstrak menjadi alat yang dapat ditindaklanjuti dan dapat digunakan pengguna untuk merencanakan perdagangan simulasi mereka.] -&gt; [Library: JS]</p>
<p class="p1"><span class="Apple-converted-space">        </span>- [Baru: Ide Trading LLM] -&gt; [Goal: Contoh Aplikasi TA] -&gt; [Viz: Teks Dinamis] -&gt; [Interaction: Tombol klik untuk menghasilkan ide trading hipotetis] -&gt; [Justification: Memberikan contoh praktis bagaimana analisis teknis dapat digunakan untuk merumuskan ide trading, dengan penjelasan dari AI.] -&gt; [Library: Gemini API (gemini-2.0-flash)]</p>
<p class="p1"><span class="Apple-converted-space">        </span>- [Baru: Insight Pola LLM] -&gt; [Goal: Pemahaman Pola Mendalam] -&gt; [Viz: Teks Dinamis] -&gt; [Interaction: Tombol klik untuk mendapatkan skenario trading berbasis pola] -&gt; [Justification: Mengkontekstualisasikan pola grafik dan candlestick dalam skenario trading nyata, membantu pemahaman dan retensi.] -&gt; [Library: Gemini API (gemini-2.0-flash)]</p>
<p class="p1"><span class="Apple-converted-space">        </span>- [Baru: Analisis Sentimen Pasar LLM] -&gt; [Goal: Wawasan Pasar Sederhana] -&gt; [Viz: Teks Dinamis] -&gt; [Interaction: Tombol klik untuk mendapatkan sentimen pasar hipotetis untuk koin yang dipilih] -&gt; [Justification: Memperkenalkan konsep sentimen pasar dan analisis fundamental secara sederhana, melengkapi analisis teknis.] -&gt; [Library: Gemini API (gemini-2.0-flash)]</p>
<p class="p1"><span class="Apple-converted-space">        </span>- [Baru: Tanya Ahli AI LLM] -&gt; [Goal: Klarifikasi Konsep Dasar] -&gt; [Viz: Teks Dinamis] -&gt; [Interaction: Input teks dan tombol untuk mengajukan pertanyaan dan mendapatkan penjelasan] -&gt; [Justification: Memberikan bantuan kontekstual dan personal untuk memahami istilah atau konsep dasar trading, sangat berguna untuk pemula.] -&gt; [Library: Gemini API (gemini-2.0-flash)]</p>
<p class="p1"><span class="Apple-converted-space">        </span>- [Baru: Simulasi Skenario Perdagangan LLM] -&gt; [Goal: Latihan Pengambilan Keputusan] -&gt; [Viz: Teks Dinamis] -&gt; [Interaction: Input teks skenario dan tombol untuk mendapatkan respons AI] -&gt; [Justification: Memungkinkan pengguna untuk berlatih berpikir kritis dalam berbagai kondisi pasar hipotetis, mengintegrasikan TA dan manajemen risiko.] -&gt; [Library: Gemini API (gemini-2.0-flash)]</p>
<p class="p1"><span class="Apple-converted-space">        </span>- [Baru: Ringkasan Berita Kripto (Hipotetis) LLM] -&gt; [Goal: Memahami Dampak Fundamental] -&gt; [Viz: Teks Dinamis] -&gt; [Interaction: Tombol klik untuk mendapatkan ringkasan berita hipotetis dan dampaknya] -&gt; [Justification: Memperkenalkan konsep analisis fundamental dan bagaimana berita dapat memengaruhi harga, bahkan dalam lingkungan simulasi.] -&gt; [Library: Gemini API (gemini-2.0-flash)]</p>
<p class="p1"><span class="Apple-converted-space">        </span>- [Baru: Penjelasan Jargon Kripto LLM] -&gt; [Goal: Klarifikasi Istilah] -&gt; [Viz: Teks Dinamis] -&gt; [Interaction: Input teks jargon dan tombol untuk mendapatkan penjelasan] -&gt; [Justification: Membantu pemula memahami istilah-istilah kompleks di dunia kripto dengan cepat dan mudah.] -&gt; [Library: Gemini API (gemini-2.0-flash)]</p>
<p class="p1"><span class="Apple-converted-space">        </span>- [Baru: Prediksi Tren Jangka Pendek (Hipotetis) LLM] -&gt; [Goal: Pemahaman Prediksi Pasar] -&gt; [Viz: Teks Dinamis] -&gt; [Interaction: Tombol klik untuk mendapatkan prediksi tren hipotetis] -&gt; [Justification: Mengajarkan konsep prediksi tren dan faktor-faktor yang mempengaruhinya, tanpa memberikan nasihat finansial nyata.] -&gt; [Library: Gemini API (gemini-2.0-flash)]</p>
<p class="p1"><span class="Apple-converted-space">        </span>- [Baru: Simulasi Trading Interaktif] -&gt; [Goal: Pengalaman Trading Praktis] -&gt; [Viz: Grafik Harga Dinamis, Antarmuka Beli/Jual, Saldo] -&gt; [Interaction: Beli/Jual, Memicu Berita, Reset] -&gt; [Justification: Memberikan pengalaman langsung dalam mengelola perdagangan di tengah volatilitas pasar yang disimulasikan, termasuk reaksi terhadap berita mendadak.] -&gt; [Library: HTML/CSS/JS, Chart.js]</p>
<p class="p1"><span class="Apple-converted-space">        </span>--&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #FDFDFD;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: 'Inter', sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap');</p>
<p class="p1"><span class="Apple-converted-space">        </span>.chart-container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 900px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-left: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-right: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 350px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-height: 50vh;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.indicator-chart-container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 900px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-left: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-right: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 150px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-height: 25vh;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.nav-item.active {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #E0E7FF;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #3730A3;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.nav-item:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #EEF2FF;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Hide scrollbar for Chrome, Safari and Opera */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.no-scrollbar::-webkit-scrollbar {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: none;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Hide scrollbar for IE, Edge and Firefox */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.no-scrollbar {</p>
<p class="p1"><span class="Apple-converted-space">            </span>-ms-overflow-style: none;<span class="Apple-converted-space">  </span>/* IE and Edge */</p>
<p class="p1"><span class="Apple-converted-space">            </span>scrollbar-width: none;<span class="Apple-converted-space">  </span>/* Firefox */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.candlestick {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>flex-direction: column;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 12px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0 1px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.wick {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 2px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: currentColor;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.green { color: #22C55E; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.red { color: #EF4444; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Modal Styles */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">            </span>z-index: 1000;</p>
<p class="p1"><span class="Apple-converted-space">            </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: rgba(0,0,0,0.4);</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-content {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #fefefe;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 8px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 90%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 600px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 4px 6px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.close-button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #aaa;</p>
<p class="p1"><span class="Apple-converted-space">            </span>float: right;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 28px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">            </span>top: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>right: 20px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.close-button:hover,</p>
<p class="p1"><span class="Apple-converted-space">        </span>.close-button:focus {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: black;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-decoration: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Custom Alert Modal Styles */</p>
<p class="p1"><span class="Apple-converted-space">        </span>#custom-alert-modal {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: none; /* Hidden by default */</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: fixed; /* Stay in place */</p>
<p class="p1"><span class="Apple-converted-space">            </span>z-index: 1001; /* Sit on top */</p>
<p class="p1"><span class="Apple-converted-space">            </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%; /* Full width */</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 100%; /* Full height */</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow: auto; /* Enable scroll if needed */</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: rgba(0,0,0,0.4); /* Black w/ opacity */</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center; /* Center horizontally */</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center; /* Center vertically */</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>#custom-alert-content {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #fefefe;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 8px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 80%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 400px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 4px 6px rgba(0,0,0,0.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: relative;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>#custom-alert-close-btn {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #aaa;</p>
<p class="p1"><span class="Apple-converted-space">            </span>float: right;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 28px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: absolute;</p>
<p class="p1"><span class="Apple-converted-space">            </span>top: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>right: 20px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>#custom-alert-close-btn:hover,</p>
<p class="p1"><span class="Apple-converted-space">        </span>#custom-alert-close-btn:focus {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: black;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-decoration: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body class="text-gray-800"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="flex h-screen"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- Sidebar Navigation --&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;aside class="w-64 bg-white border-r border-gray-200 flex-shrink-0 flex flex-col no-scrollbar overflow-y-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h1 class="text-2xl font-bold text-indigo-700"&gt;Trader&lt;span class="font-normal"&gt;Muda&lt;/span&gt;&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-sm text-gray-500 mt-1"&gt;Panduan Trading Kripto&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;nav class="flex-grow px-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;a href="#dasbor" class="nav-item flex items-center px-4 py-3 my-1 rounded-lg transition-colors duration-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="mr-3"&gt;🏠&lt;/span&gt; Dasbor</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;a href="#dasar" class="nav-item flex items-center px-4 py-3 my-1 rounded-lg transition-colors duration-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="mr-3"&gt;🧱&lt;/span&gt; Dasar Kripto</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;a href="#arena" class="nav-item flex items-center px-4 py-3 my-1 rounded-lg transition-colors duration-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="mr-3"&gt;📈&lt;/span&gt; Arena Analisis</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;a href="#simulasi" class="nav-item flex items-center px-4 py-3 my-1 rounded-lg transition-colors duration-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="mr-3"&gt;🎮&lt;/span&gt; Simulasi Trading</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;a href="#pustaka" class="nav-item flex items-center px-4 py-3 my-1 rounded-lg transition-colors duration-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="mr-3"&gt;📚&lt;/span&gt; Pustaka Pola</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Removed "Strategi Koin" link as requested --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;a href="#perisai" class="nav-item flex items-center px-4 py-3 my-1 rounded-lg transition-colors duration-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="mr-3"&gt;🛡️&lt;/span&gt; Perisai Trader</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/nav&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="p-4 mt-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-indigo-50 p-4 rounded-lg text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="text-sm text-indigo-800"&gt;Berlatih di &lt;span class="font-bold"&gt;KriptoVerse Academy&lt;/span&gt; untuk menjadi trader handal tanpa risiko.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/aside&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- Main Content --&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;main class="flex-1 overflow-y-auto p-6 md:p-10 bg-gray-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Dashboard Section --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;section id="dasbor" class="view"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h2 class="text-3xl font-bold mb-2"&gt;Selamat Datang, Calon Trader!&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-gray-600 mb-8"&gt;Ini adalah dasbor Anda untuk menaklukkan dunia trading kripto. Mulailah perjalanan Anda dari nol hingga mahir.&lt;/p&gt;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="bg-white p-6 rounded-xl shadow-sm hover:shadow-lg transition-shadow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h3 class="font-bold text-lg mb-2 flex items-center"&gt;&lt;span class="mr-3 text-2xl"&gt;🧱&lt;/span&gt; Mulai dari Dasar&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p class="text-gray-600 mb-4"&gt;Pahami apa itu kripto, blockchain, dan cara kerja order perdagangan.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;a href="#dasar" class="nav-direct text-indigo-600 font-semibold hover:underline"&gt;Pelajari Sekarang &amp;rarr;&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="bg-white p-6 rounded-xl shadow-sm hover:shadow-lg transition-shadow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h3 class="font-bold text-lg mb-2 flex items-center"&gt;&lt;span class="mr-3 text-2xl"&gt;📈&lt;/span&gt; Masuk ke Arena&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p class="text-gray-600 mb-4"&gt;Analisis grafik harga interaktif dengan berbagai indikator teknis.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;a href="#arena" class="nav-direct text-indigo-600 font-semibold hover:underline"&gt;Mulai Analisis &amp;rarr;&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="bg-white p-6 rounded-xl shadow-sm hover:shadow-lg transition-shadow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h3 class="font-bold text-lg mb-2 flex items-center"&gt;&lt;span class="mr-3 text-2xl"&gt;🛡️&lt;/span&gt; Lindungi Modal&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p class="text-gray-600 mb-4"&gt;Kuasai manajemen risiko dan psikologi trading, kunci kesuksesan Anda.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;a href="#perisai" class="nav-direct text-indigo-600 font-semibold hover:underline"&gt;Bangun Pertahanan &amp;rarr;&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mt-10 bg-white p-6 rounded-xl shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;h3 class="font-bold text-xl mb-4"&gt;Tentang Aplikasi Ini&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;p class="text-gray-600 leading-relaxed"&gt;Aplikasi ini mengubah panduan trading statis menjadi sebuah pengalaman belajar yang dinamis dan interaktif. Tujuannya adalah untuk memberikan Anda, sebagai trader muda, sebuah "tempat latihan" atau "laboratorium" di mana Anda dapat memahami konsep-konsep kompleks dengan cara yang menyenangkan dan praktis. Setiap bagian dirancang untuk membangun pengetahuan Anda secara bertahap, mulai dari fondasi teoretis hingga aplikasi praktis di 'Arena Analisis' dan penguasaan pola pikir di 'Perisai Trader'. Gunakan alat ini untuk bereksperimen, membuat "kesalahan" virtual, dan membangun kepercayaan diri sebelum terjun ke pasar nyata. &lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/section&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Dasar Kripto Section --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;section id="dasar" class="view hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h2 class="text-3xl font-bold mb-6"&gt;Dasar Kripto &amp; Mekanisme Pasar&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="space-y-4" id="dasar-content"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mt-8 pt-6 border-t border-gray-200 bg-white p-6 rounded-xl shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-xl font-bold mb-4"&gt;✨ Tanya Ahli AI&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="text-gray-600 mb-4"&gt;Ajukan pertanyaan tentang konsep dasar kripto atau trading, dan dapatkan penjelasan dari AI.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="flex flex-col sm:flex-row gap-4 mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;input type="text" id="ai-question-input" placeholder="Misal: Apa itu 'volume' dalam trading?" class="flex-grow rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button id="ask-ai-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg shadow-md hover:bg-indigo-700 transition-colors flex-shrink-0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>Tanya AI</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="ai-answer-result" class="mt-4 p-4 bg-indigo-50 rounded-lg text-indigo-800 hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p class="font-semibold mb-2"&gt;Jawaban AI:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div id="ai-answer-content" class="text-sm"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="ai-answer-loading" class="mt-4 text-center text-indigo-600 hidden"&gt;AI sedang berpikir...&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mt-8 pt-6 border-t border-gray-200 bg-white p-6 rounded-xl shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-xl font-bold mb-4"&gt;✨ Penjelasan Jargon Kripto&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="text-gray-600 mb-4"&gt;Bingung dengan istilah kripto? Masukkan jargon di sini dan biarkan AI menjelaskannya.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="flex flex-col sm:flex-row gap-4 mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;input type="text" id="jargon-input" placeholder="Misal: Apa itu 'HODL'?" class="flex-grow rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button id="explain-jargon-btn" class="bg-purple-600 text-white px-6 py-2 rounded-lg shadow-md hover:bg-purple-700 transition-colors flex-shrink-0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>Jelaskan Jargon</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="jargon-result" class="mt-4 p-4 bg-purple-50 rounded-lg text-purple-800 hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p class="font-semibold mb-2"&gt;Penjelasan AI:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div id="jargon-content" class="text-sm"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="jargon-loading" class="mt-4 text-center text-purple-600 hidden"&gt;AI sedang mencari penjelasan...&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/section&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Arena Analisis Section --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;section id="arena" class="view hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>&lt;h2 class="text-3xl font-bold mb-2"&gt;Arena Analisis&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>&lt;p class="text-gray-600 mb-6"&gt;Pilih koin dan terapkan indikator teknis untuk menganalisis pergerakan harga secara langsung.&lt;/p&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-white p-6 rounded-xl shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="flex flex-wrap items-center gap-4 mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;label for="coin-select" class="block text-sm font-medium text-gray-700 mb-1"&gt;Pilih Koin:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;select id="coin-select" class="rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"&gt;&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="flex-grow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;label class="block text-sm font-medium text-gray-700 mb-1"&gt;Indikator:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="flex flex-wrap gap-x-4 gap-y-2" id="indicator-toggles"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="info-box-container" class="mb-4 space-y-2"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;!-- Candlestick Example for Arena Analysis --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="flex justify-center items-center h-12 mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span class="text-sm text-gray-600 mr-2"&gt;Contoh Candlestick:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div id="arena-candlestick-examples" class="flex items-end h-12"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="chart-container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;canvas id="priceChart"&gt;&lt;/canvas&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="indicator-charts-container" class="mt-4 space-y-4"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="mt-8 pt-6 border-t border-gray-200 grid grid-cols-1 md:grid-cols-2 gap-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;h3 class="text-xl font-bold mb-4"&gt;✨ Ide Trading dari AI&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p class="text-gray-600 mb-4"&gt;Dapatkan contoh ide trading hipotetis berdasarkan koin yang dipilih. Ini hanyalah simulasi untuk belajar, bukan nasihat finansial.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;button id="generate-trade-idea-btn" class="bg-indigo-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-indigo-700 transition-colors flex items-center justify-center w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>✨ Hasilkan Ide Trading</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div id="trade-idea-result" class="mt-4 p-4 bg-indigo-50 rounded-lg text-indigo-800 hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;p class="font-semibold mb-2"&gt;Ide Trading:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div id="trade-idea-content" class="text-sm"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div id="trade-idea-loading" class="mt-4 text-center text-indigo-600 hidden"&gt;Memikirkan ide trading...&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;h3 class="text-xl font-bold mb-4"&gt;✨ Analisis Sentimen Pasar AI&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p class="text-gray-600 mb-4"&gt;Dapatkan gambaran singkat sentimen pasar (bullish/bearish/netral) untuk koin yang dipilih.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;button id="generate-sentiment-btn" class="bg-green-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-green-700 transition-colors flex items-center justify-center w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>✨ Dapatkan Sentimen</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div id="sentiment-result" class="mt-4 p-4 bg-green-50 rounded-lg text-green-800 hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;p class="font-semibold mb-2"&gt;Sentimen AI:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div id="sentiment-content" class="text-sm"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div id="sentiment-loading" class="mt-4 text-center text-green-600 hidden"&gt;Menganalisis sentimen...&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="mt-8 pt-6 border-t border-gray-200 grid grid-cols-1 md:grid-cols-2 gap-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;h3 class="text-xl font-bold mb-4"&gt;✨ Simulasi Skenario Perdagangan&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p class="text-gray-600 mb-4"&gt;Masukkan skenario pasar hipotetis dan lihat bagaimana seorang trader mungkin bereaksi.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="flex flex-col sm:flex-row gap-4 mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="text" id="scenario-input" placeholder="Misal: Bitcoin tiba-tiba turun 10% karena berita regulasi..." class="flex-grow rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;button id="simulate-scenario-btn" class="bg-purple-600 text-white px-6 py-2 rounded-lg shadow-md hover:bg-purple-700 transition-colors flex-shrink-0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>Simulasikan</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div id="scenario-result" class="mt-4 p-4 bg-purple-50 rounded-lg text-purple-800 hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;p class="font-semibold mb-2"&gt;Respons AI:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div id="scenario-content" class="text-sm"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div id="scenario-loading" class="mt-4 text-center text-purple-600 hidden"&gt;Menjalankan simulasi...&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;h3 class="text-xl font-bold mb-4"&gt;✨ Ringkasan Berita Kripto (Hipotetis)&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p class="text-gray-600 mb-4"&gt;Dapatkan ringkasan berita hipotetis dan potensi dampaknya pada koin yang dipilih.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;button id="generate-news-summary-btn" class="bg-blue-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors flex items-center justify-center w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>✨ Hasilkan Berita</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div id="news-summary-result" class="mt-4 p-4 bg-blue-50 rounded-lg text-blue-800 hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;p class="font-semibold mb-2"&gt;Berita AI:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div id="news-summary-content" class="text-sm"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div id="news-summary-loading" class="mt-4 text-center text-blue-600 hidden"&gt;Membuat ringkasan berita...&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="mt-8 pt-6 border-t border-gray-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h3 class="text-xl font-bold mb-4"&gt;✨ Prediksi Tren Jangka Pendek (Hipotetis)&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p class="text-gray-600 mb-4"&gt;Dapatkan simulasi prediksi tren jangka pendek untuk koin yang dipilih. Ini hanya untuk tujuan edukasi.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button id="predict-trend-btn" class="bg-orange-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-orange-700 transition-colors flex items-center justify-center w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>✨ Prediksi Tren</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div id="trend-prediction-result" class="mt-4 p-4 bg-orange-50 rounded-lg text-orange-800 hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p class="font-semibold mb-2"&gt;Prediksi AI:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div id="trend-prediction-content" class="text-sm"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div id="trend-prediction-loading" class="mt-4 text-center text-orange-600 hidden"&gt;AI sedang memprediksi...&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/section&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Arena Simulasi Trading Section --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;section id="simulasi" class="view hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h2 class="text-3xl font-bold mb-2"&gt;Arena Simulasi Trading&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-gray-600 mb-6"&gt;Berlatih trading dengan modal virtual dan rasakan dinamika pasar, termasuk reaksi terhadap berita mendadak!&lt;/p&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-white p-6 rounded-xl shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="sim-controls" class="flex flex-col sm:flex-row gap-4 mb-6 items-center justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="flex items-center gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;label for="sim-coin-select" class="block text-sm font-medium text-gray-700"&gt;Pilih Koin:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;select id="sim-coin-select" class="rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"&gt;&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="flex gap-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;button id="start-sim-btn" class="bg-blue-600 text-white px-6 py-2 rounded-lg shadow-md hover:bg-blue-700 transition-colors"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>Mulai Simulasi</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;button id="reset-sim-btn" class="bg-red-600 text-white px-6 py-2 rounded-lg shadow-md hover:bg-red-700 transition-colors hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>Reset Simulasi</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="sim-info" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="bg-gray-100 p-4 rounded-lg text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p class="text-sm text-gray-600"&gt;Saldo USDT Anda:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p id="sim-balance" class="text-xl font-bold text-gray-800"&gt;$10,000.00&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="bg-gray-100 p-4 rounded-lg text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p class="text-sm text-gray-600"&gt;Harga Saat Ini (&lt;span id="sim-current-coin-display"&gt;BTC&lt;/span&gt;):&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p id="sim-current-price" class="text-xl font-bold text-gray-800"&gt;$0.00&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="bg-gray-100 p-4 rounded-lg text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p class="text-sm text-gray-600"&gt;Koin Anda (&lt;span id="sim-holding-coin-display"&gt;BTC&lt;/span&gt;):&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p id="sim-coin-holding" class="text-xl font-bold text-gray-800"&gt;0.00&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="sim-pnl-info" class="bg-gray-100 p-4 rounded-lg text-center mb-6 hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p class="text-sm text-gray-600"&gt;Keuntungan/Kerugian Mengambang:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p id="sim-pnl" class="text-xl font-bold text-gray-800"&gt;$0.00&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;!-- Candlestick Example for Simulation Trading --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="flex justify-center items-center h-12 mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span class="text-sm text-gray-600 mr-2"&gt;Contoh Candlestick:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div id="sim-candlestick-examples" class="flex items-end h-12"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="sim-chart-container" class="chart-container mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;canvas id="simPriceChart"&gt;&lt;/canvas&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="sim-trade-actions" class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="bg-green-50 p-4 rounded-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;h4 class="font-semibold text-lg mb-3 text-green-800"&gt;Beli Koin&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="flex flex-col gap-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="number" id="buy-amount" placeholder="Jumlah USDT untuk dibeli" class="rounded-md border-green-300 shadow-sm focus:border-green-500 focus:ring-green-500 p-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;button id="buy-btn" class="bg-green-600 text-white px-6 py-2 rounded-lg shadow-md hover:bg-green-700 transition-colors"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>Beli &lt;span id="buy-coin-display"&gt;BTC&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="bg-red-50 p-4 rounded-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;h4 class="font-semibold text-lg mb-3 text-red-800"&gt;Jual Koin&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="flex flex-col gap-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;input type="number" id="sell-amount" placeholder="Jumlah koin untuk dijual" class="rounded-md border-red-300 shadow-sm focus:border-red-500 focus:ring-red-500 p-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;button id="sell-btn" class="bg-red-600 text-white px-6 py-2 rounded-lg shadow-md hover:bg-red-700 transition-colors"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>Jual &lt;span id="sell-coin-display"&gt;BTC&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="sim-event-message" class="mt-6 p-4 bg-yellow-100 text-yellow-800 rounded-lg text-center font-semibold hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;!-- Event messages will appear here --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/section&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Pustaka Pola Section --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;section id="pustaka" class="view hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h2 class="text-3xl font-bold mb-6"&gt;Pustaka Pola&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mb-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;h3 class="text-2xl font-semibold mb-2"&gt;Pola Candlestick&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;p class="text-gray-600 mb-4"&gt;Kenali sinyal pasar melalui formasi lilin individu. Klik setiap kartu untuk detail.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;div id="candlestick-patterns-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;h3 class="text-2xl font-semibold mb-2"&gt;Pola Grafik&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;p class="text-gray-600 mb-4"&gt;Identifikasi formasi harga yang lebih besar yang menandakan pembalikan atau kelanjutan tren.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                     </span>&lt;div id="chart-patterns-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/section&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Removed "Strategi Koin" section as requested --&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;!-- Perisai Trader Section --&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;section id="perisai" class="view hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>&lt;h2 class="text-3xl font-bold mb-6"&gt;Perisai Trader: Risiko &amp; Psikologi&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>&lt;p class="text-gray-600 mb-8"&gt;Bab ini adalah fondasi kesuksesan jangka panjang. Kuasai ini, dan Anda akan selangkah lebih maju dari yang lain.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="grid lg:grid-cols-2 gap-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="bg-white p-6 rounded-xl shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h3 class="text-xl font-bold mb-4"&gt;Kalkulator Manajemen Risiko&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="space-y-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;h4 class="font-semibold text-lg mb-2"&gt;Ukuran Posisi (Aturan 1%)&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div class="grid grid-cols-2 gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;label for="pos-size-account" class="text-sm"&gt;Ukuran Akun ($)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;input type="number" id="pos-size-account" value="10000" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;label for="pos-size-risk" class="text-sm"&gt;Risiko (%)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;input type="number" id="pos-size-risk" value="1" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;label for="pos-size-entry" class="text-sm"&gt;Harga Masuk&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;input type="number" id="pos-size-entry" placeholder="cth: 50000" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;label for="pos-size-sl" class="text-sm"&gt;Harga Stop-Loss&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;input type="number" id="pos-size-sl" placeholder="cth: 49500" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div id="pos-size-result" class="mt-4 text-center bg-indigo-50 p-3 rounded-lg font-semibold text-indigo-800"&gt;Masukkan harga untuk menghitung.&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;hr/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;h4 class="font-semibold text-lg mb-2"&gt;Rasio Risiko-Imbalan&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div class="grid grid-cols-1 gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                     </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;label for="rr-entry" class="text-sm"&gt;Harga Masuk&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;input type="number" id="rr-entry" placeholder="cth: 50000" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;label for="rr-tp" class="text-sm"&gt;Harga Take-Profit&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;input type="number" id="rr-tp" placeholder="cth: 51000" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                     </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;label for="rr-sl" class="text-sm"&gt;Harga Stop-Loss&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>&lt;input type="number" id="rr-sl" placeholder="cth: 49500" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div id="rr-result" class="mt-4 text-center bg-green-50 p-3 rounded-lg font-semibold text-green-800"&gt;Masukkan harga untuk menghitung.&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="bg-white p-6 rounded-xl shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h3 class="text-xl font-bold mb-4"&gt;Menguasai Pikiran Anda&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div id="psychology-content"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mt-8 bg-white p-6 rounded-xl shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-xl font-bold mb-4"&gt;Jurnal Perdagangan: Peta Jalan Anda&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="text-gray-600 mb-4"&gt;Jurnal adalah alat paling ampuh untuk peningkatan. Gunakan struktur ini untuk melacak dan belajar dari setiap perdagangan (bahkan yang simulasi).&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="overflow-x-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;table class="w-full text-sm text-left text-gray-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;thead class="text-xs text-gray-700 uppercase bg-gray-100"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;th scope="col" class="px-6 py-3"&gt;Item&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;th scope="col" class="px-6 py-3"&gt;Contoh Catatan&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;tbody&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;tr class="bg-white border-b"&gt;&lt;td class="px-6 py-4 font-semibold" colspan="2"&gt;Pra-Perdagangan&lt;/td&gt;&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;tr class="bg-white border-b"&gt;&lt;td class="px-6 py-4"&gt;Alasan Masuk&lt;/td&gt;&lt;td class="px-6 py-4"&gt;BTC/USDT: Breakout dari pola segitiga naik di grafik 4jam, dikonfirmasi volume.&lt;/td&gt;&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;tr class="bg-white border-b"&gt;&lt;td class="px-6 py-4"&gt;Stop-Loss&lt;/td&gt;&lt;td class="px-6 py-4"&gt;Ditetapkan di $68,500, sedikit di bawah support garis tren bawah.&lt;/td&gt;&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;tr class="bg-white border-b"&gt;&lt;td class="px-6 py-4 font-semibold" colspan="2"&gt;Pasca-Perdagangan&lt;/td&gt;&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;tr class="bg-white border-b"&gt;&lt;td class="px-6 py-4"&gt;Hasil&lt;/td&gt;&lt;td class="px-6 py-4"&gt;Keluar di TP $71,000. Keuntungan +2.5%.&lt;/td&gt;&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;tr class="bg-white border-b"&gt;&lt;td class="px-6 py-4"&gt;Pelajaran&lt;/td&gt;&lt;td class="px-6 py-4"&gt;Strategi breakout berhasil. Kesabaran menunggu konfirmasi volume terbayar.&lt;/td&gt;&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/tbody&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/table&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/section&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/main&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Pattern Insight Modal --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="pattern-insight-modal" class="modal"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="modal-content"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span class="close-button"&gt;&amp;times;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 id="modal-pattern-name" class="text-2xl font-bold mb-4"&gt;&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;p id="modal-pattern-desc" class="text-gray-700 mb-4"&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="modal-pattern-illustration" class="flex justify-center mb-4"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button id="generate-pattern-insight-btn" class="bg-purple-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-purple-700 transition-colors"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>✨ Dapatkan Insight Pola</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="pattern-insight-result" class="mt-4 p-4 bg-purple-50 rounded-lg text-purple-800 hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="font-semibold mb-2"&gt;Insight AI:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div id="pattern-insight-content" class="text-sm"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="pattern-insight-loading" class="mt-4 text-center text-purple-600 hidden"&gt;Menganalisis pola...&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Custom Alert Modal HTML --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="custom-alert-modal"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="custom-alert-content"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span id="custom-alert-close-btn"&gt;&amp;times;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;p id="custom-alert-message" class="text-gray-700 font-semibold mb-4"&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button id="custom-alert-ok-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg shadow-md hover:bg-indigo-700 transition-colors"&gt;OK&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;script&gt;</p>
<p class="p1">document.addEventListener('DOMContentLoaded', () =&gt; {</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Custom Chart.js Candlestick Plugin</p>
<p class="p1"><span class="Apple-converted-space">    </span>const candlestickPlugin = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: 'candlestick',</p>
<p class="p1"><span class="Apple-converted-space">        </span>beforeDatasetsDraw(chart, args, pluginOptions) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const { ctx, chartArea: { top, bottom, left, right, width, height }, scales: { x, y } } = chart;</p>
<p class="p1"><span class="Apple-converted-space">            </span>ctx.save();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const dataset = chart.data.datasets[0];</p>
<p class="p1"><span class="Apple-converted-space">            </span>const data = dataset.data; // Get the actual data array</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!data || data.length === 0 || width === 0 || height === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>// console.warn("Candlestick plugin: No data or chart area is zero dimension. Skipping draw.");</p>
<p class="p1"><span class="Apple-converted-space">                </span>ctx.restore();</p>
<p class="p1"><span class="Apple-converted-space">                </span>return; // Skip drawing if no data or chart area is invalid</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Calculate bar width dynamically based on chart width and number of data points</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Ensure data.length is not zero to prevent division by zero</p>
<p class="p1"><span class="Apple-converted-space">            </span>const barWidth = Math.max(1, (width / data.length) * 0.7);<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>data.forEach((ohlc, index) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!ohlc || typeof ohlc.o === 'undefined') return; // Ensure OHLC data exists</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const xCoord = x.getPixelForValue(index);<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const openPrice = y.getPixelForValue(ohlc.o);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const highPrice = y.getPixelForValue(ohlc.h);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const lowPrice = y.getPixelForValue(ohlc.l);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const closePrice = y.getPixelForValue(ohlc.c);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Determine color</p>
<p class="p1"><span class="Apple-converted-space">                </span>const isBullish = ohlc.c &gt;= ohlc.o;</p>
<p class="p1"><span class="Apple-converted-space">                </span>ctx.strokeStyle = isBullish ? '#22C55E' : '#EF4444'; // Green for bullish, Red for bearish</p>
<p class="p1"><span class="Apple-converted-space">                </span>ctx.fillStyle = isBullish ? '#22C55E' : '#EF4444';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Draw wick</p>
<p class="p1"><span class="Apple-converted-space">                </span>ctx.lineWidth = 1;</p>
<p class="p1"><span class="Apple-converted-space">                </span>ctx.beginPath();</p>
<p class="p1"><span class="Apple-converted-space">                </span>ctx.moveTo(xCoord, highPrice);</p>
<p class="p1"><span class="Apple-converted-space">                </span>ctx.lineTo(xCoord, lowPrice);</p>
<p class="p1"><span class="Apple-converted-space">                </span>ctx.stroke();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Draw body</p>
<p class="p1"><span class="Apple-converted-space">                </span>const bodyTop = isBullish ? closePrice : openPrice;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const bodyBottom = isBullish ? openPrice : closePrice;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const bodyHeight = Math.max(1, bodyBottom - bodyTop); // Ensure minimum height for visibility</p>
<p class="p1"><span class="Apple-converted-space">                </span>ctx.fillRect(xCoord - barWidth / 2, bodyTop, barWidth, bodyHeight);</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>ctx.restore();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Register the plugin</p>
<p class="p1"><span class="Apple-converted-space">    </span>Chart.register(candlestickPlugin);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Custom Alert Function</p>
<p class="p1"><span class="Apple-converted-space">    </span>function showAlert(message) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const modal = document.getElementById('custom-alert-modal');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const messageElement = document.getElementById('custom-alert-message');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const closeButton = document.getElementById('custom-alert-close-btn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const okButton = document.getElementById('custom-alert-ok-btn');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>messageElement.textContent = message;</p>
<p class="p1"><span class="Apple-converted-space">        </span>modal.style.display = 'flex';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const closeAlert = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>modal.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">            </span>closeButton.removeEventListener('click', closeAlert);</p>
<p class="p1"><span class="Apple-converted-space">            </span>okButton.removeEventListener('click', closeAlert);</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>closeButton.addEventListener('click', closeAlert);</p>
<p class="p1"><span class="Apple-converted-space">        </span>okButton.addEventListener('click', closeAlert);</p>
<p class="p1"><span class="Apple-converted-space">        </span>modal.addEventListener('click', (event) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (event.target === modal) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>closeAlert();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// --- DATA STORE ---</p>
<p class="p1"><span class="Apple-converted-space">    </span>const appData = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>dasar: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{</p>
<p class="p1"><span class="Apple-converted-space">                </span>title: "Apa Itu Mata Uang Kripto?",</p>
<p class="p1"><span class="Apple-converted-space">                </span>content: "Mata uang kripto adalah mata uang digital yang menggunakan enkripsi untuk keamanan. Tidak seperti mata uang tradisional, kripto bersifat terdesentralisasi, artinya tidak dikendalikan oleh bank atau pemerintah. Nilainya berasal dari teknologi, kelangkaan, dan kepercayaan komunitas."</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>{</p>
<p class="p1"><span class="Apple-converted-space">                </span>title: "Kekuatan Teknologi Blockchain",</p>
<p class="p1"><span class="Apple-converted-space">                </span>content: "Blockchain adalah buku besar digital yang terdistribusi dan tidak dapat diubah (immutable). Setiap transaksi dicatat dalam 'blok' dan dihubungkan bersama membentuk 'rantai'. Teknologi ini adalah tulang punggung yang membuat kripto aman dan transparan tanpa memerlukan pihak ketiga."</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>{</p>
<p class="p1"><span class="Apple-converted-space">                </span>title: "Jenis-Jenis Order Perdagangan",</p>
<p class="p1"><span class="Apple-converted-space">                </span>content: `</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;ul class="space-y-3 list-disc list-inside"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;li&gt;&lt;span class="font-semibold"&gt;Market Order:&lt;/span&gt; Beli/jual instan pada harga pasar terbaik yang tersedia. Prioritasnya kecepatan, bukan harga.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;li&gt;&lt;span class="font-semibold"&gt;Limit Order:&lt;/span&gt; Beli/jual pada harga yang Anda tentukan atau lebih baik. Memberi Anda kontrol harga, tetapi eksekusi tidak dijamin.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;li&gt;&lt;span class="font-semibold"&gt;Stop-Loss Order:&lt;/span&gt; Jaring pengaman Anda. Menjual aset secara otomatis jika harga turun ke level tertentu untuk membatasi kerugian.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;li&gt;&lt;span class="font-semibold"&gt;Take-Profit Order:&lt;/span&gt; Mengunci keuntungan. Menjual aset secara otomatis jika harga naik ke target keuntungan Anda.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/ul&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>`</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>],</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Updated coins for public consumption</p>
<p class="p1"><span class="Apple-converted-space">        </span>coins: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>USDT: { name: 'Tether', type: 'Stablecoin' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>BTC: { name: 'Bitcoin', type: 'Aset Inti' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>ETH: { name: 'Ethereum', type: 'Aset Inti/Platform' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>SOL: { name: 'Solana', type: 'Aset Inti/L1' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>XRP: { name: 'XRP', type: 'Transfer Lintas Batas' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>ADA: { name: 'Cardano', type: 'Aset Inti/L1' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>DOGE: { name: 'Dogecoin', type: 'Meme Coin' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>MATIC: { name: 'Polygon', type: 'Utilitas/L2' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>BNB: { name: 'BNB', type: 'Utilitas/Bursa' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>ARB: { name: 'Arbitrum', type: 'Utilitas/L2' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>DOT: { name: 'Polkadot', type: 'Interoperabilitas' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>AVAX: { name: 'Avalanche', type: 'Aset Inti/L1' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>LINK: { name: 'Chainlink', type: 'Oracle' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>PEPE: { name: 'Pepe', type: 'Meme Coin' }, // Kept as a popular meme coin example</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>indicators: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>ma50: { name: 'MA 50', type: 'overlay', color: 'rgba(255, 159, 64, 1)' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>ma200: { name: 'MA 200', type: 'overlay', color: 'rgba(54, 162, 235, 1)' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>bb: { name: 'Bollinger Bands', type: 'overlay', color: 'rgba(75, 192, 192, 0.2)' },</p>
<p class="p1"><span class="Apple-converted-space">            </span>rsi: { name: 'RSI', type: 'indicator_chart', color: 'rgba(153, 102, 255, 1)'},</p>
<p class="p1"><span class="Apple-converted-space">            </span>macd: { name: 'MACD', type: 'indicator_chart', color: 'rgba(255, 99, 132, 1)'}</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>candlestickPatterns: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Doji", signal: "Keraguan", desc: "Badan sangat kecil atau tidak ada, menandakan keraguan pasar dan potensi titik balik.", illustration: { type: 'doji' } },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Hammer", signal: "Pembalikan Bullish", desc: "Terjadi setelah tren turun. Sumbu bawah panjang menunjukkan pembeli menolak harga yang lebih rendah.", illustration: { type: 'hammer' } },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Bullish Engulfing", signal: "Pembalikan Bullish Kuat", desc: "Lilin hijau besar 'menelan' lilin merah sebelumnya, menandakan pergeseran kuat ke sentimen beli.", illustration: { type: 'bullish_engulfing' } },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Bearish Engulfing", signal: "Pembalikan Bearish Kuat", desc: "Lilin merah besar 'menelan' lilin hijau sebelumnya, menandakan tekanan jual yang dominan.", illustration: { type: 'bearish_engulfing' } },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Hanging Man", signal: "Pembalikan Bearish", desc: "Mirip Hammer tapi setelah tren naik. Menunjukkan penjual mulai masuk ke pasar.", illustration: { type: 'hanging_man' } },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Shooting Star", signal: "Pembalikan Bearish", desc: "Badan kecil di bawah dengan sumbu atas panjang. Pembeli mencoba mendorong harga naik tetapi gagal.", illustration: { type: 'shooting_star' } },</p>
<p class="p1"><span class="Apple-converted-space">        </span>],</p>
<p class="p1"><span class="Apple-converted-space">        </span>chartPatterns: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Head and Shoulders", type: "Pembalikan Bearish", desc: "Pola tiga puncak (puncak tengah tertinggi) yang menandakan akhir dari tren naik. Dikonfirmasi jika harga menembus 'garis leher' ke bawah." },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Inverse Head and Shoulders", type: "Pembalikan Bullish", desc: "Kebalikan dari H&amp;S, terbentuk setelah tren turun dan menandakan potensi pembalikan ke atas." },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Double Top", type: "Pembalikan Bearish", desc: "Bentuk 'M' di mana harga gagal menembus level resistance dua kali. Menunjukkan kelelahan pembeli." },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Double Bottom", type: "Pembalikan Bullish", desc: "Bentuk 'W' di mana harga memantul dari level support dua kali. Menunjukkan kekuatan pembeli." },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Ascending Triangle", type: "Kelanjutan Bullish", desc: "Terbentuk dengan resistance datar dan support yang menanjak. Menunjukkan akumulasi oleh pembeli." },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Descending Triangle", type: "Kelanjutan Bearish", desc: "Terbentuk dengan support datar dan resistance yang menurun. Menunjukkan tekanan jual yang meningkat." },</p>
<p class="p1"><span class="Apple-converted-space">        </span>],</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Removed coinStrategies as requested</p>
<p class="p1"><span class="Apple-converted-space">        </span>psychology: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{</p>
<p class="p1"><span class="Apple-converted-space">                </span>name: "FOMO (Fear Of Missing Out)",</p>
<p class="p1"><span class="Apple-converted-space">                </span>emoji: "😱",</p>
<p class="p1"><span class="Apple-converted-space">                </span>desc: "Dorongan untuk membeli aset yang harganya sedang meroket karena takut ketinggalan keuntungan. Seringkali berakhir dengan membeli di puncak.",</p>
<p class="p1"><span class="Apple-converted-space">                </span>solution: "Tetap pada rencana trading Anda. Jangan pernah masuk ke perdagangan tanpa analisis. Jika Anda terlambat, biarkan saja, akan selalu ada peluang lain."</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>{</p>
<p class="p1"><span class="Apple-converted-space">                </span>name: "Keserakahan",</p>
<p class="p1"><span class="Apple-converted-space">                </span>emoji: "🤑",</p>
<p class="p1"><span class="Apple-converted-space">                </span>desc: "Keinginan untuk keuntungan berlebihan, membuat Anda menahan posisi terlalu lama atau mengambil risiko yang tidak perlu.",</p>
<p class="p1"><span class="Apple-converted-space">                </span>solution: "Selalu tetapkan target take-profit sebelum masuk. Saat target tercapai, jangan ragu untuk mengambil keuntungan. Disiplin lebih penting dari keuntungan ekstra."</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>{</p>
<p class="p1"><span class="Apple-converted-space">                </span>name: "Panik",</p>
<p class="p1"><span class="Apple-converted-space">                </span>emoji: "😰",</p>
<p class="p1"><span class="Apple-converted-space">                </span>desc: "Menjual aset secara membabi buta saat pasar turun karena ketakutan ekstrem akan kerugian yang lebih besar.",</p>
<p class="p1"><span class="Apple-converted-space">                </span>solution: "Gunakan stop-loss. Stop-loss adalah keputusan logis yang Anda buat saat pikiran jernih. Percayalah pada analisis Anda, bukan emosi sesaat."</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>],</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// --- STATE MANAGEMENT ---</p>
<p class="p1"><span class="Apple-converted-space">    </span>let state = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>activeView: 'dasbor',</p>
<p class="p1"><span class="Apple-converted-space">        </span>activeCoin: 'BTC', // Default to BTC</p>
<p class="p1"><span class="Apple-converted-space">        </span>activeIndicators: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>ma50: false,</p>
<p class="p1"><span class="Apple-converted-space">            </span>ma200: false,</p>
<p class="p1"><span class="Apple-converted-space">            </span>bb: false,</p>
<p class="p1"><span class="Apple-converted-space">            </span>rsi: false,</p>
<p class="p1"><span class="Apple-converted-space">            </span>macd: false,</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Simulation state</p>
<p class="p1"><span class="Apple-converted-space">        </span>simulation: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>active: false,</p>
<p class="p1"><span class="Apple-converted-space">            </span>balance: 10000, // Starting USDT balance</p>
<p class="p1"><span class="Apple-converted-space">            </span>coinHoldings: {}, // e.g., { BTC: 0.5 }</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentPrice: 0,</p>
<p class="p1"><span class="Apple-converted-space">            </span>selectedSimCoin: 'BTC',</p>
<p class="p1"><span class="Apple-converted-space">            </span>priceHistory: [], // Stores OHLC objects</p>
<p class="p1"><span class="Apple-converted-space">            </span>simChartInstance: null,</p>
<p class="p1"><span class="Apple-converted-space">            </span>priceInterval: null,</p>
<p class="p1"><span class="Apple-converted-space">            </span>eventInterval: null,</p>
<p class="p1"><span class="Apple-converted-space">            </span>eventActive: false,</p>
<p class="p1"><span class="Apple-converted-space">            </span>eventMagnitude: 0,</p>
<p class="p1"><span class="Apple-converted-space">            </span>eventDuration: 0,</p>
<p class="p1"><span class="Apple-converted-space">            </span>eventMessage: '',</p>
<p class="p1"><span class="Apple-converted-space">            </span>eventTimer: null,</p>
<p class="p1"><span class="Apple-converted-space">            </span>initialBuyPrice: 0 // To track PnL</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>let chartInstances = {};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// --- RENDERING FUNCTIONS ---</p>
<p class="p1"><span class="Apple-converted-space">    </span>function render() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Update view visibility</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.querySelectorAll('.view').forEach(view =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>view.classList.toggle('hidden', view.id !== state.activeView);</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Update nav active class</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.querySelectorAll('.nav-item').forEach(nav =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>nav.classList.toggle('active', nav.hash === `#${state.activeView}`);</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.activeView === 'arena') {</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateCharts();</p>
<p class="p1"><span class="Apple-converted-space">        </span>} else if (state.activeView === 'simulasi') {</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateSimulationUI();</p>
<p class="p1"><span class="Apple-converted-space">            </span>// If navigating to simulation and it's not active, ensure chart is ready to be started</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!state.simulation.active &amp;&amp; !state.simulation.simChartInstance) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>// Initialize a blank chart to show something before "Mulai Simulasi" is clicked</p>
<p class="p1"><span class="Apple-converted-space">                </span>const ctx = document.getElementById('simPriceChart').getContext('2d');</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (state.simulation.simChartInstance) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>state.simulation.simChartInstance.destroy();</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.simulation.simChartInstance = new Chart(ctx, {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>type: 'bar', // Use bar type and let plugin draw candlesticks</p>
<p class="p1"><span class="Apple-converted-space">                    </span>data: {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>labels: [],</p>
<p class="p1"><span class="Apple-converted-space">                        </span>datasets: [{</p>
<p class="p1"><span class="Apple-converted-space">                            </span>label: `Harga ${state.simulation.selectedSimCoin}`,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>data: [], // Will store OHLC objects</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}]</p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>options: {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>responsive: true,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>maintainAspectRatio: false,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>scales: {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>x: {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                </span>type: 'category',<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                </span>labels: [],<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                </span>display: true<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                            </span>},</p>
<p class="p1"><span class="Apple-converted-space">                            </span>y: { ticks: { font: { size: 10 } } }</p>
<p class="p1"><span class="Apple-converted-space">                        </span>},</p>
<p class="p1"><span class="Apple-converted-space">                        </span>plugins: {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>legend: { display: false },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>tooltip: {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                </span>mode: 'index',<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                </span>intersect: false,</p>
<p class="p1"><span class="Apple-converted-space">                                </span>callbacks: {</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>label: function(context) {</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>const ohlc = context.dataset.data[context.dataIndex];</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>if (ohlc &amp;&amp; typeof ohlc.o !== 'undefined') {</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>return [</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>`Open: ${ohlc.o.toFixed(2)}`,</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>`High: ${ohlc.h.toFixed(2)}`,</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>`Low: ${ohlc.l.toFixed(2)}`,</p>
<p class="p1"><span class="Apple-converted-space">                                                </span>`Close: ${ohlc.c.toFixed(2)}`</p>
<p class="p1"><span class="Apple-converted-space">                                            </span>];</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>return context.dataset.label + ': ' + context.parsed.y.toFixed(2);</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                                </span>}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>},</p>
<p class="p1"><span class="Apple-converted-space">                        </span>plugins: [candlestickPlugin]</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function init() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Initial setup functions</p>
<p class="p1"><span class="Apple-converted-space">        </span>setupNavigation();</p>
<p class="p1"><span class="Apple-converted-space">        </span>populateDasarContent();</p>
<p class="p1"><span class="Apple-converted-space">        </span>populateArenaControls();</p>
<p class="p1"><span class="Apple-converted-space">        </span>populatePatternLibraries();</p>
<p class="p1"><span class="Apple-converted-space">        </span>// populateCoinStrategies(); // Removed as requested</p>
<p class="p1"><span class="Apple-converted-space">        </span>populatePsychologyContent();</p>
<p class="p1"><span class="Apple-converted-space">        </span>setupRiskCalculators();</p>
<p class="p1"><span class="Apple-converted-space">        </span>setupGeminiFeatures(); // New function for Gemini features</p>
<p class="p1"><span class="Apple-converted-space">        </span>setupSimulation(); // New function for simulation</p>
<p class="p1"><span class="Apple-converted-space">        </span>insertCandlestickExamples(); // Call this after DOM is loaded and function is defined</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Set initial view</p>
<p class="p1"><span class="Apple-converted-space">        </span>const initialView = window.location.hash ? window.location.hash.substring(1) : 'dasbor';</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.activeView = initialView;</p>
<p class="p1"><span class="Apple-converted-space">        </span>render();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>function setupNavigation() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.querySelectorAll('.nav-item, .nav-direct').forEach(link =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>link.addEventListener('click', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>e.preventDefault();</p>
<p class="p1"><span class="Apple-converted-space">                </span>const viewId = e.currentTarget.hash.substring(1);</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.activeView = viewId;</p>
<p class="p1"><span class="Apple-converted-space">                </span>window.location.hash = viewId;</p>
<p class="p1"><span class="Apple-converted-space">                </span>render();</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>window.addEventListener('hashchange', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const viewId = window.location.hash ? window.location.hash.substring(1) : 'dasbor';</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.activeView = viewId;</p>
<p class="p1"><span class="Apple-converted-space">            </span>render();</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function populateDasarContent() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const container = document.getElementById('dasar-content');</p>
<p class="p1"><span class="Apple-converted-space">        </span>container.innerHTML = appData.dasar.map(item =&gt; `</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="bg-white p-6 rounded-xl shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h3 class="text-xl font-bold mb-3"&gt;${item.title}&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-gray-700 leading-relaxed"&gt;${item.content}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>`).join('');</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function populateArenaControls() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const coinSelect = document.getElementById('coin-select');</p>
<p class="p1"><span class="Apple-converted-space">        </span>coinSelect.innerHTML = Object.keys(appData.coins).map(key =&gt;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>`&lt;option value="${key}" ${key === state.activeCoin ? 'selected' : ''}&gt;${appData.coins[key].name} (${key})&lt;/option&gt;`</p>
<p class="p1"><span class="Apple-converted-space">        </span>).join('');</p>
<p class="p1"><span class="Apple-converted-space">        </span>coinSelect.addEventListener('change', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.activeCoin = e.target.value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateCharts();</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const indicatorToggles = document.getElementById('indicator-toggles');</p>
<p class="p1"><span class="Apple-converted-space">        </span>indicatorToggles.innerHTML = Object.keys(appData.indicators).map(key =&gt; `</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label for="toggle-${key}" class="flex items-center space-x-2 cursor-pointer"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="checkbox" id="toggle-${key}" data-indicator="${key}" class="rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span class="text-sm font-medium text-gray-700"&gt;${appData.indicators[key].name}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>`).join('');</p>
<p class="p1"><span class="Apple-converted-space">        </span>indicatorToggles.addEventListener('change', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if(e.target.type === 'checkbox') {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const indicatorKey = e.target.dataset.indicator;</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.activeIndicators[indicatorKey] = e.target.checked;</p>
<p class="p1"><span class="Apple-converted-space">                </span>updateCharts();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>function populatePatternLibraries() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const candlestickContainer = document.getElementById('candlestick-patterns-container');</p>
<p class="p1"><span class="Apple-converted-space">        </span>candlestickContainer.innerHTML = appData.candlestickPatterns.map((p, index) =&gt; `</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="bg-white p-4 rounded-lg shadow-sm cursor-pointer hover:shadow-md transition-shadow pattern-card" data-pattern-type="candlestick" data-pattern-index="${index}"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="flex justify-between items-start"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>&lt;h4 class="font-bold"&gt;${p.name}&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>&lt;p class="text-sm font-semibold ${p.signal.includes('Bullish') ? 'text-green-600' : 'text-red-600'}"&gt;${p.signal}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="candlestick-illustration"&gt;${generateCandlestickIllustration(p.illustration)}&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-sm text-gray-600 mt-2"&gt;${p.desc}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>`).join('');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const chartPatternContainer = document.getElementById('chart-patterns-container');</p>
<p class="p1"><span class="Apple-converted-space">        </span>chartPatternContainer.innerHTML = appData.chartPatterns.map((p, index) =&gt; `</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="bg-white p-6 rounded-xl shadow-sm cursor-pointer hover:shadow-md transition-shadow pattern-card" data-pattern-type="chart" data-pattern-index="${index}"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h4 class="font-bold text-lg mb-1"&gt;${p.name}&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-sm font-semibold mb-2 ${p.type.includes('Bullish') ? 'text-green-600' : 'text-red-600'}"&gt;${p.type}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-sm text-gray-600"&gt;${p.desc}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>`).join('');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>document.querySelectorAll('.pattern-card').forEach(card =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>card.addEventListener('click', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const type = e.currentTarget.dataset.patternType;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const index = parseInt(e.currentTarget.dataset.patternIndex);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const pattern = type === 'candlestick' ? appData.candlestickPatterns[index] : appData.chartPatterns[index];</p>
<p class="p1"><span class="Apple-converted-space">                </span>showPatternInsightModal(pattern, type);</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function generateCandlestickIllustration(illustration) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>let candles = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const baseClass = "candlestick";</p>
<p class="p1"><span class="Apple-converted-space">        </span>switch (illustration.type) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>case 'doji':</p>
<p class="p1"><span class="Apple-converted-space">                </span>candles.push(`&lt;div class="${baseClass} green"&gt;&lt;div class="wick" style="height: 15px;"&gt;&lt;/div&gt;&lt;div class="body" style="height: 2px;"&gt;&lt;/div&gt;&lt;div class="wick" style="height: 15px;"&gt;&lt;/div&gt;&lt;/div&gt;`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>break;</p>
<p class="p1"><span class="Apple-converted-space">            </span>case 'hammer':</p>
<p class="p1"><span class="Apple-converted-space">                </span>candles.push(`&lt;div class="${baseClass} green"&gt;&lt;div class="wick" style="height: 2px;"&gt;&lt;/div&gt;&lt;div class="body" style="height: 8px;"&gt;&lt;/div&gt;&lt;div class="wick" style="height: 25px;"&gt;&lt;/div&gt;&lt;/div&gt;`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>break;</p>
<p class="p1"><span class="Apple-converted-space">            </span>case 'bullish_engulfing':</p>
<p class="p1"><span class="Apple-converted-space">                </span>candles.push(`&lt;div class="${baseClass} red" style="transform: scale(0.8);"&gt;&lt;div class="wick" style="height: 5px;"&gt;&lt;/div&gt;&lt;div class="body" style="height: 15px;"&gt;&lt;/div&gt;&lt;div class="wick" style="height: 5px;"&gt;&lt;/div&gt;&lt;/div&gt;`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>candles.push(`&lt;div class="${baseClass} green"&gt;&lt;div class="wick" style="height: 2px;"&gt;&lt;/div&gt;&lt;div class="body" style="height: 30px;"&gt;&lt;/div&gt;&lt;div class="wick" style="height: 2px;"&gt;&lt;/div&gt;&lt;/div&gt;`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>break;</p>
<p class="p1"><span class="Apple-converted-space">            </span>case 'bearish_engulfing':</p>
<p class="p1"><span class="Apple-converted-space">                </span>candles.push(`&lt;div class="${baseClass} green" style="transform: scale(0.8);"&gt;&lt;div class="wick" style="height: 5px;"&gt;&lt;/div&gt;&lt;div class="body" style="height: 15px;"&gt;&lt;/div&gt;&lt;div class="wick" style="height: 5px;"&gt;&lt;/div&gt;&lt;/div&gt;`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>candles.push(`&lt;div class="${baseClass} red"&gt;&lt;div class="wick" style="height: 2px;"&gt;&lt;/div&gt;&lt;div class="body" style="height: 30px;"&gt;&lt;/div&gt;&lt;div class="wick" style="height: 2px;"&gt;&lt;/div&gt;&lt;/div&gt;`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>break;</p>
<p class="p1"><span class="Apple-converted-space">            </span>case 'hanging_man':</p>
<p class="p1"><span class="Apple-converted-space">                </span>candles.push(`&lt;div class="${baseClass} red"&gt;&lt;div class="wick" style="height: 2px;"&gt;&lt;/div&gt;&lt;div class="body" style="height: 8px;"&gt;&lt;/div&gt;&lt;div class="wick" style="height: 25px;"&gt;&lt;/div&gt;&lt;/div&gt;`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>break;</p>
<p class="p1"><span class="Apple-converted-space">            </span>case 'shooting_star':</p>
<p class="p1"><span class="Apple-converted-space">                 </span>candles.push(`&lt;div class="${baseClass} red"&gt;&lt;div class="wick" style="height: 25px;"&gt;&lt;/div&gt;&lt;div class="body" style="height: 8px;"&gt;&lt;/div&gt;&lt;div class="wick" style="height: 2px;"&gt;&lt;/div&gt;&lt;/div&gt;`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>break;</p>
<p class="p1"><span class="Apple-converted-space">            </span>case 'bullish_example': // New example for general bullish candle</p>
<p class="p1"><span class="Apple-converted-space">                </span>candles.push(`&lt;div class="${baseClass} green"&gt;&lt;div class="wick" style="height: 5px;"&gt;&lt;/div&gt;&lt;div class="body" style="height: 20px;"&gt;&lt;/div&gt;&lt;div class="wick" style="height: 5px;"&gt;&lt;/div&gt;&lt;/div&gt;`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>break;</p>
<p class="p1"><span class="Apple-converted-space">            </span>case 'bearish_example': // New example for general bearish candle</p>
<p class="p1"><span class="Apple-converted-space">                </span>candles.push(`&lt;div class="${baseClass} red"&gt;&lt;div class="wick" style="height: 5px;"&gt;&lt;/div&gt;&lt;div class="body" style="height: 20px;"&gt;&lt;/div&gt;&lt;div class="wick" style="height: 5px;"&gt;&lt;/div&gt;&lt;/div&gt;`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>break;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>return `&lt;div class="flex items-end h-12"&gt;${candles.join('')}&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Function to insert candlestick examples into their respective containers</p>
<p class="p1"><span class="Apple-converted-space">    </span>function insertCandlestickExamples() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const arenaExamplesContainer = document.getElementById('arena-candlestick-examples');</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (arenaExamplesContainer) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>arenaExamplesContainer.innerHTML =<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>generateCandlestickIllustration({type: 'bullish_example'}) +</p>
<p class="p1"><span class="Apple-converted-space">                </span>generateCandlestickIllustration({type: 'bearish_example'});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const simExamplesContainer = document.getElementById('sim-candlestick-examples');</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (simExamplesContainer) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>simExamplesContainer.innerHTML =<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>generateCandlestickIllustration({type: 'bullish_example'}) +</p>
<p class="p1"><span class="Apple-converted-space">                </span>generateCandlestickIllustration({type: 'bearish_example'});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Removed populateCoinStrategies() as requested</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function populatePsychologyContent() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const container = document.getElementById('psychology-content');</p>
<p class="p1"><span class="Apple-converted-space">        </span>container.innerHTML = appData.psychology.map(p =&gt; `</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="mb-5"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h4 class="font-semibold text-lg mb-2 flex items-center"&gt;${p.emoji} &lt;span class="ml-2"&gt;${p.name}&lt;/span&gt;&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-gray-600 text-sm mb-2"&gt;${p.desc}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-indigo-50 text-indigo-800 p-3 rounded-lg text-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;strong class="font-semibold"&gt;Solusi:&lt;/strong&gt; ${p.solution}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>`).join('');</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function setupRiskCalculators() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const inputsPosSize = ['pos-size-account', 'pos-size-risk', 'pos-size-entry', 'pos-size-sl'];</p>
<p class="p1"><span class="Apple-converted-space">        </span>const inputsRR = ['rr-entry', 'rr-tp', 'rr-sl'];</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>inputsPosSize.forEach(id =&gt; document.getElementById(id).addEventListener('input', calculatePositionSize));</p>
<p class="p1"><span class="Apple-converted-space">        </span>inputsRR.forEach(id =&gt; document.getElementById(id).addEventListener('input', calculateRiskReward));</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function calculatePositionSize() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const accountSize = parseFloat(document.getElementById('pos-size-account').value);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const riskPercent = parseFloat(document.getElementById('pos-size-risk').value);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const entryPrice = parseFloat(document.getElementById('pos-size-entry').value);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const slPrice = parseFloat(document.getElementById('pos-size-sl').value);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const resultEl = document.getElementById('pos-size-result');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>if (isNaN(accountSize) || isNaN(riskPercent) || isNaN(entryPrice) || isNaN(slPrice) || entryPrice &lt;= slPrice) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>showAlert("Masukkan semua nilai yang valid untuk Ukuran Posisi.");<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>resultEl.innerHTML = "Masukkan semua nilai yang valid.";</p>
<p class="p1"><span class="Apple-converted-space">            </span>resultEl.className = "mt-4 text-center bg-red-50 p-3 rounded-lg font-semibold text-red-800";</p>
<p class="p1"><span class="Apple-converted-space">            </span>return;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const riskAmount = accountSize * (riskPercent / 100);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const riskPerShare = entryPrice - slPrice;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const positionSize = riskAmount / riskPerShare;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>resultEl.innerHTML = `Beli ${positionSize.toFixed(4)} unit (${(positionSize * entryPrice).toLocaleString('id-ID', {style:'currency', currency:'USD', minimumFractionDigits: 2})})`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>resultEl.className = "mt-4 text-center bg-indigo-50 p-3 rounded-lg font-semibold text-indigo-800";</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function calculateRiskReward() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const entryPrice = parseFloat(document.getElementById('rr-entry').value);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const tpPrice = parseFloat(document.getElementById('rr-tp').value);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const slPrice = parseFloat(document.getElementById('rr-sl').value);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const resultEl = document.getElementById('rr-result');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>if (isNaN(entryPrice) || isNaN(tpPrice) || isNaN(slPrice) || entryPrice &lt;= slPrice || entryPrice &gt;= tpPrice) {</p>
<p class="p1"><span class="Apple-converted-space">             </span>showAlert("Masukkan semua nilai yang valid untuk Rasio Risiko-Imbalan.");<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">             </span>resultEl.innerHTML = "Masukkan semua nilai yang valid.";</p>
<p class="p1"><span class="Apple-converted-space">             </span>resultEl.className = "mt-4 text-center bg-red-50 p-3 rounded-lg font-semibold text-red-800";</p>
<p class="p1"><span class="Apple-converted-space">            </span>return;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const potentialReward = tpPrice - entryPrice;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const potentialRisk = entryPrice - slPrice;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const ratio = potentialReward / potentialRisk;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>let className = "mt-4 text-center p-3 rounded-lg font-semibold ";</p>
<p class="p1"><span class="Apple-converted-space">        </span>if(ratio &gt;= 2) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>className += "bg-green-50 text-green-800";</p>
<p class="p1"><span class="Apple-converted-space">        </span>} else if (ratio &gt;= 1) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>className += "bg-yellow-50 text-yellow-800";</p>
<p class="p1"><span class="Apple-converted-space">        </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">             </span>className += "bg-red-50 text-red-800";</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>resultEl.className = className;</p>
<p class="p1"><span class="Apple-converted-space">        </span>resultEl.innerHTML = `Rasio 1 : ${ratio.toFixed(2)} ${ratio &gt;= 2 ? '👍' : (ratio &gt;= 1 ? '🤔' : '👎')}`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// --- CHARTING LOGIC ---</p>
<p class="p1"><span class="Apple-converted-space">    </span>function generatePriceData(length = 100) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const data = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>let price = Math.random() * 50000 + 10000;</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.activeCoin === 'USDT') { // Keep USDT price stable</p>
<p class="p1"><span class="Apple-converted-space">            </span>price = 1.00;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>for(let i=0; i&lt;length; i++) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const date = new Date();</p>
<p class="p1"><span class="Apple-converted-space">            </span>date.setDate(date.getDate() - (length - i));</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (state.activeCoin === 'USDT') {</p>
<p class="p1"><span class="Apple-converted-space">                </span>price = 1.00 + (Math.random() - 0.5) * 0.0001; // Very small fluctuations for stablecoin</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>// Simulate OHLC for candlestick</p>
<p class="p1"><span class="Apple-converted-space">                </span>const open = price;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const close = open + (Math.random() - 0.5) * (open * 0.02);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const high = Math.max(open, close) * (1 + Math.random() * 0.005);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const low = Math.min(open, close) * (1 - Math.random() * 0.005);</p>
<p class="p1"><span class="Apple-converted-space">                </span>price = close; // Next candle's open will be based on this close</p>
<p class="p1"><span class="Apple-converted-space">                </span>data.push({</p>
<p class="p1"><span class="Apple-converted-space">                    </span>x: date.getTime(),</p>
<p class="p1"><span class="Apple-converted-space">                    </span>o: open,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>h: high,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>l: low,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>c: close</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>return data;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>function calculateSMA(data, period) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>let sma = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>for (let i = period - 1; i &lt; data.length; i++) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>let sum = 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (let j = 0; j &lt; period; j++) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>sum += data[i - j].c; // Use close price for SMA</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>sma.push({x: data[i].x, y: sum / period});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>return sma;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function calculateBollingerBands(data, period, stdDev) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>let middle = [], upper = [], lower = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>for (let i = period - 1; i &lt; data.length; i++) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>let slice = data.slice(i - period + 1, i + 1).map(d =&gt; d.c); // Use close price</p>
<p class="p1"><span class="Apple-converted-space">            </span>let sum = slice.reduce((a, b) =&gt; a + b, 0);</p>
<p class="p1"><span class="Apple-converted-space">            </span>let mean = sum / period;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>let sqDiff = slice.map(val =&gt; Math.pow(val - mean, 2)).reduce((a, b) =&gt; a + b, 0);</p>
<p class="p1"><span class="Apple-converted-space">            </span>let deviation = Math.sqrt(sqDiff / period);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>middle.push({x: data[i].x, y: mean});</p>
<p class="p1"><span class="Apple-converted-space">            </span>upper.push({x: data[i].x, y: mean + stdDev * deviation});</p>
<p class="p1"><span class="Apple-converted-space">            </span>lower.push({x: data[i].x, y: mean - stdDev * deviation});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>return { middle, upper, lower };</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function calculateRSI(data, period) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>let rsi = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>let gains = 0, losses = 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>for (let i = 1; i &lt; data.length; i++) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const change = data[i].c - data[i-1].c; // Use close price</p>
<p class="p1"><span class="Apple-converted-space">            </span>if(i &lt; period) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (change &gt; 0) gains += change;</p>
<p class="p1"><span class="Apple-converted-space">                </span>else losses -= change;</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if(i === period) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>gains /= period;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>losses /= period;</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>gains = (gains * (period - 1) + (change &gt; 0 ? change : 0)) / period;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>losses = (losses * (period - 1) + (change &lt; 0 ? -change : 0)) / period;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (losses === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>rsi.push({x: data[i].x, y: 100});</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const rs = gains / losses;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>rsi.push({x: data[i].x, y: 100 - (100 / (1 + rs))});</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>return rsi;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function calculateMACD(data, shortPeriod, longPeriod, signalPeriod) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const calculateEMA = (d, p) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>let ema = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>let k = 2 / (p + 1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>ema.push(d[0]);</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (let i = 1; i &lt; d.length; i++) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>ema.push(d[i] * k + ema[i-1] * (1-k));</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>return ema;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const prices = data.map(d =&gt; d.c); // Use close price</p>
<p class="p1"><span class="Apple-converted-space">        </span>const emaShort = calculateEMA(prices, shortPeriod);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const emaLong = calculateEMA(prices, longPeriod);</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>let macdLine = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>for (let i = 0; i &lt; prices.length; i++) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>macdLine.push(emaShort[i] - emaLong[i]);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const signalLine = calculateEMA(macdLine, signalPeriod);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const histogram = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>for (let i = 0; i &lt; prices.length; i++) {</p>
<p class="p1"><span class="Apple-converted-space">             </span>histogram.push(macdLine[i] - signalLine[i]);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const dates = data.map(d =&gt; d.x);</p>
<p class="p1"><span class="Apple-converted-space">        </span>return {</p>
<p class="p1"><span class="Apple-converted-space">            </span>macd: macdLine.map((val, i) =&gt; ({x: dates[i], y: val})),</p>
<p class="p1"><span class="Apple-converted-space">            </span>signal: signalLine.map((val, i) =&gt; ({x: dates[i], y: val})),</p>
<p class="p1"><span class="Apple-converted-space">            </span>histogram: histogram.map((val, i) =&gt; ({x: dates[i], y: val}))</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function updateCharts() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Destroy existing charts</p>
<p class="p1"><span class="Apple-converted-space">        </span>Object.values(chartInstances).forEach(chart =&gt; chart.destroy());</p>
<p class="p1"><span class="Apple-converted-space">        </span>chartInstances = {};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const data = generatePriceData(); // This now returns OHLC data</p>
<p class="p1"><span class="Apple-converted-space">        </span>const labels = data.map(d =&gt; new Date(d.x).toLocaleDateString()); // Use dates for labels</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const datasets = [{</p>
<p class="p1"><span class="Apple-converted-space">            </span>label: `${appData.coins[state.activeCoin].name} Price`,</p>
<p class="p1"><span class="Apple-converted-space">            </span>data: data, // Pass OHLC objects directly</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Candlestick plugin will handle styling</p>
<p class="p1"><span class="Apple-converted-space">        </span>}];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const infoBoxContainer = document.getElementById('info-box-container');</p>
<p class="p1"><span class="Apple-converted-space">        </span>infoBoxContainer.innerHTML = '';</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.activeIndicators.ma50) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const sma50 = calculateSMA(data, 50);</p>
<p class="p1"><span class="Apple-converted-space">            </span>datasets.push({</p>
<p class="p1"><span class="Apple-converted-space">                </span>label: 'SMA 50',</p>
<p class="p1"><span class="Apple-converted-space">                </span>data: sma50.map(d =&gt; d.y),</p>
<p class="p1"><span class="Apple-converted-space">                </span>borderColor: appData.indicators.ma50.color,</p>
<p class="p1"><span class="Apple-converted-space">                </span>borderWidth: 1.5,</p>
<p class="p1"><span class="Apple-converted-space">                </span>pointRadius: 0,</p>
<p class="p1"><span class="Apple-converted-space">                </span>fill: false,</p>
<p class="p1"><span class="Apple-converted-space">                </span>tension: 0.4,</p>
<p class="p1"><span class="Apple-converted-space">                </span>type: 'line' // Explicitly set type for overlays</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>infoBoxContainer.innerHTML += `&lt;div class="bg-orange-50 text-orange-800 text-sm p-2 rounded-lg"&gt;&lt;strong&gt;SMA 50 (Overlay):&lt;/strong&gt; Menunjukkan tren jangka menengah. Harga di atasnya = bullish.&lt;/div&gt;`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.activeIndicators.ma200) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const sma200 = calculateSMA(data, 200);</p>
<p class="p1"><span class="Apple-converted-space">            </span>datasets.push({</p>
<p class="p1"><span class="Apple-converted-space">                </span>label: 'SMA 200',</p>
<p class="p1"><span class="Apple-converted-space">                </span>data: sma200.map(d =&gt; d.y),</p>
<p class="p1"><span class="Apple-converted-space">                </span>borderColor: appData.indicators.ma200.color,</p>
<p class="p1"><span class="Apple-converted-space">                </span>borderWidth: 1.5,</p>
<p class="p1"><span class="Apple-converted-space">                </span>pointRadius: 0,</p>
<p class="p1"><span class="Apple-converted-space">                </span>fill: false,</p>
<p class="p1"><span class="Apple-converted-space">                </span>tension: 0.4,</p>
<p class="p1"><span class="Apple-converted-space">                </span>type: 'line' // Explicitly set type for overlays</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>infoBoxContainer.innerHTML += `&lt;div class="bg-blue-50 text-blue-800 text-sm p-2 rounded-lg"&gt;&lt;strong&gt;SMA 200 (Overlay):&lt;/strong&gt; Menunjukkan tren jangka panjang. Level support/resistance kunci.&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.activeIndicators.bb) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const bb = calculateBollingerBands(data, 20, 2);</p>
<p class="p1"><span class="Apple-converted-space">            </span>datasets.push({ label: 'BB Upper', data: bb.upper.map(d=&gt;d.y), ...chartConfig.bb.upper, type: 'line' }); // Explicitly set type</p>
<p class="p1"><span class="Apple-converted-space">            </span>datasets.push({ label: 'BB Lower', data: bb.lower.map(d=&gt;d.y), ...chartConfig.bb.lower, type: 'line' }); // Explicitly set type</p>
<p class="p1"><span class="Apple-converted-space">             </span>infoBoxContainer.innerHTML += `&lt;div class="bg-teal-50 text-teal-800 text-sm p-2 rounded-lg"&gt;&lt;strong&gt;Bollinger Bands:&lt;/strong&gt; Mengukur volatilitas. Pita menyempit (squeeze) sering mendahului pergerakan besar.&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const ctxPrice = document.getElementById('priceChart').getContext('2d');</p>
<p class="p1"><span class="Apple-converted-space">        </span>chartInstances.price = new Chart(ctxPrice, {</p>
<p class="p1"><span class="Apple-converted-space">            </span>type: 'bar', // Use bar type and let plugin draw candlesticks</p>
<p class="p1"><span class="Apple-converted-space">            </span>data: { labels, datasets },</p>
<p class="p1"><span class="Apple-converted-space">            </span>options: chartConfig.main,</p>
<p class="p1"><span class="Apple-converted-space">            </span>plugins: [candlestickPlugin] // Use the custom plugin</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const indicatorChartsContainer = document.getElementById('indicator-charts-container');</p>
<p class="p1"><span class="Apple-converted-space">        </span>indicatorChartsContainer.innerHTML = ''; // Clear previous indicator charts</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>if(state.activeIndicators.rsi) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const rsiData = calculateRSI(data, 14);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const rsiLabels = rsiData.map(d =&gt; d.x);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const rsiValues = rsiData.map(d =&gt; d.y);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const canvasEl = document.createElement('canvas');</p>
<p class="p1"><span class="Apple-converted-space">            </span>indicatorChartsContainer.innerHTML += `&lt;div class="indicator-chart-container"&gt;&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>indicatorChartsContainer.lastChild.appendChild(canvasEl);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const lastRSI = rsiValues[rsiValues.length - 1].toFixed(2);</p>
<p class="p1"><span class="Apple-converted-space">            </span>let rsiText = `RSI (${lastRSI})`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>if(lastRSI &gt; 70) rsiText += ' - Overbought 🥵';</p>
<p class="p1"><span class="Apple-converted-space">            </span>if(lastRSI &lt; 30) rsiText += ' - Oversold 🥶';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>infoBoxContainer.innerHTML += `&lt;div class="bg-purple-50 text-purple-800 text-sm p-2 rounded-lg"&gt;&lt;strong&gt;RSI (Relative Strength Index):&lt;/strong&gt; Mengukur momentum. &gt;70 = Overbought, &lt;30 = Oversold.&lt;/div&gt;`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>chartInstances.rsi = new Chart(canvasEl.getContext('2d'), {</p>
<p class="p1"><span class="Apple-converted-space">                </span>type: 'line',</p>
<p class="p1"><span class="Apple-converted-space">                </span>data: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>labels: rsiLabels,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>datasets: [{</p>
<p class="p1"><span class="Apple-converted-space">                        </span>label: 'RSI',</p>
<p class="p1"><span class="Apple-converted-space">                        </span>data: rsiValues,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>...chartConfig.rsi</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}]</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>options: chartConfig.indicator(rsiText)</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>if(state.activeIndicators.macd) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const macdData = calculateMACD(data, 12, 26, 9);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const macdLabels = macdData.macd.map(d =&gt; d.x);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const canvasEl = document.createElement('canvas');</p>
<p class="p1"><span class="Apple-converted-space">            </span>indicatorChartsContainer.innerHTML += `&lt;div class="indicator-chart-container"&gt;&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>indicatorChartsContainer.lastChild.appendChild(canvasEl);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">             </span>infoBoxContainer.innerHTML += `&lt;div class="bg-pink-50 text-pink-800 text-sm p-2 rounded-lg"&gt;&lt;strong&gt;MACD:&lt;/strong&gt; Menunjukkan momentum dan tren. Perhatikan persilangan garis MACD (biru) dan Sinyal (merah).&lt;/div&gt;`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>chartInstances.macd = new Chart(canvasEl.getContext('2d'), {</p>
<p class="p1"><span class="Apple-converted-space">                </span>type: 'bar', // MACD histogram is bar, lines are line</p>
<p class="p1"><span class="Apple-converted-space">                </span>data: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>labels: macdLabels,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>datasets: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ type: 'line', label: 'MACD', data: macdData.macd.map(d =&gt; d.y), ...chartConfig.macd.macdLine },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ type: 'line', label: 'Signal', data: macdData.signal.map(d =&gt; d.y), ...chartConfig.macd.signalLine },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ type: 'bar', label: 'Histogram', data: macdData.histogram.map(v =&gt; v.y &gt; 0 ? v.y : 0), backgroundColor: 'rgba(75, 192, 192, 0.5)' }, // Positive histogram</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ type: 'bar', label: 'Histogram', data: macdData.histogram.map(v =&gt; v.y &lt; 0 ? v.y : 0), backgroundColor: 'rgba(255, 99, 132, 0.5)' } // Negative histogram</p>
<p class="p1"><span class="Apple-converted-space">                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>options: chartConfig.indicator('MACD')</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>const chartConfig = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>main: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>responsive: true,</p>
<p class="p1"><span class="Apple-converted-space">            </span>maintainAspectRatio: false,</p>
<p class="p1"><span class="Apple-converted-space">            </span>scales: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>x: {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>type: 'category', // Changed to category for candlestick plugin to work with index</p>
<p class="p1"><span class="Apple-converted-space">                    </span>labels: [], // Will be populated dynamically</p>
<p class="p1"><span class="Apple-converted-space">                    </span>display: true // Changed from false to true to ensure axis initialization</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>y: { ticks: { font: { size: 10 } } }</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>plugins: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>legend: { display: false },</p>
<p class="p1"><span class="Apple-converted-space">                </span>tooltip: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>mode: 'index',</p>
<p class="p1"><span class="Apple-converted-space">                    </span>intersect: false,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>callbacks: {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>label: function(context) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>const ohlc = context.dataset.data[context.dataIndex];</p>
<p class="p1"><span class="Apple-converted-space">                            </span>if (ohlc &amp;&amp; typeof ohlc.o !== 'undefined') {</p>
<p class="p1"><span class="Apple-converted-space">                                </span>return [</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>`Open: ${ohlc.o.toFixed(2)}`,</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>`High: ${ohlc.h.toFixed(2)}`,</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>`Low: ${ohlc.l.toFixed(2)}`,</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>`Close: ${ohlc.c.toFixed(2)}`</p>
<p class="p1"><span class="Apple-converted-space">                                </span>];</p>
<p class="p1"><span class="Apple-converted-space">                            </span>}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>return context.dataset.label + ': ' + context.parsed.y.toFixed(2);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>interaction: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>mode: 'index',</p>
<p class="p1"><span class="Apple-converted-space">                </span>intersect: false</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>bb: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>upper: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>borderColor: 'rgba(255, 159, 64, 0)',</p>
<p class="p1"><span class="Apple-converted-space">                </span>backgroundColor: 'rgba(255, 159, 64, 0.1)',</p>
<p class="p1"><span class="Apple-converted-space">                </span>borderWidth: 0,</p>
<p class="p1"><span class="Apple-converted-space">                </span>pointRadius: 0,</p>
<p class="p1"><span class="Apple-converted-space">                </span>fill: '+1'</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>lower: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>borderColor: 'rgba(255, 159, 64, 0)',</p>
<p class="p1"><span class="Apple-converted-space">                </span>backgroundColor: 'rgba(255, 159, 64, 0.1)',</p>
<p class="p1"><span class="Apple-converted-space">                </span>borderWidth: 0,</p>
<p class="p1"><span class="Apple-converted-space">                </span>pointRadius: 0,</p>
<p class="p1"><span class="Apple-converted-space">                </span>fill: '-1'</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>rsi: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>borderColor: 'rgba(153, 102, 255, 1)',</p>
<p class="p1"><span class="Apple-converted-space">            </span>borderWidth: 2,</p>
<p class="p1"><span class="Apple-converted-space">            </span>pointRadius: 0,</p>
<p class="p1"><span class="Apple-converted-space">            </span>tension: 0.4,</p>
<p class="p1"><span class="Apple-converted-space">            </span>fill: false,</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>macd: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>macdLine: { borderColor: 'rgba(54, 162, 235, 1)', borderWidth: 2, pointRadius: 0, tension: 0.4, fill: false },</p>
<p class="p1"><span class="Apple-converted-space">            </span>signalLine: { borderColor: 'rgba(255, 99, 132, 1)', borderWidth: 2, pointRadius: 0, tension: 0.4, fill: false }</p>
<p class="p1"><span class="Apple-converted-space">        </span>},</p>
<p class="p1"><span class="Apple-converted-space">        </span>indicator: (title) =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">             </span>responsive: true,</p>
<p class="p1"><span class="Apple-converted-space">             </span>maintainAspectRatio: false,</p>
<p class="p1"><span class="Apple-converted-space">             </span>scales: {</p>
<p class="p1"><span class="Apple-converted-space">                 </span>x: { display: false },</p>
<p class="p1"><span class="Apple-converted-space">                 </span>y: { ticks: { font: { size: 10 } } }</p>
<p class="p1"><span class="Apple-converted-space">             </span>},</p>
<p class="p1"><span class="Apple-converted-space">             </span>plugins: {</p>
<p class="p1"><span class="Apple-converted-space">                 </span>legend: { display: false },</p>
<p class="p1"><span class="Apple-converted-space">                 </span>title: { display: true, text: title, align: 'start', font: { weight: 'bold' } }</p>
<p class="p1"><span class="Apple-converted-space">             </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>})</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// --- GEMINI API INTEGRATION ---</p>
<p class="p1"><span class="Apple-converted-space">    </span>async function callGeminiAPI(prompt) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const apiKey = ""; // IMPORTANT: For a public website, you should secure this API key on a server-side or serverless function.</p>
<p class="p1"><span class="Apple-converted-space">        </span>const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>let chatHistory = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>chatHistory.push({ role: "user", parts: [{ text: prompt }] });</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const payload = { contents: chatHistory };</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>try {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const response = await fetch(apiUrl, {</p>
<p class="p1"><span class="Apple-converted-space">                </span>method: 'POST',</p>
<p class="p1"><span class="Apple-converted-space">                </span>headers: { 'Content-Type': 'application/json' },</p>
<p class="p1"><span class="Apple-converted-space">                </span>body: JSON.stringify(payload)</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>const result = await response.json();</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (result.candidates &amp;&amp; result.candidates.length &gt; 0 &amp;&amp;</p>
<p class="p1"><span class="Apple-converted-space">                </span>result.candidates[0].content &amp;&amp; result.candidates[0].content.parts &amp;&amp;</p>
<p class="p1"><span class="Apple-converted-space">                </span>result.candidates[0].content.parts.length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>return result.candidates[0].content.parts[0].text;</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error("Unexpected API response structure:", result);</p>
<p class="p1"><span class="Apple-converted-space">                </span>return "Maaf, saya tidak dapat menghasilkan insight saat ini. Coba lagi nanti.";</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>console.error("Error calling Gemini API:", error);</p>
<p class="p1"><span class="Apple-converted-space">            </span>return "Terjadi kesalahan saat menghubungi AI. Periksa koneksi internet Anda.";</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function setupGeminiFeatures() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Trade Idea Generator</p>
<p class="p1"><span class="Apple-converted-space">        </span>const generateTradeIdeaBtn = document.getElementById('generate-trade-idea-btn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const tradeIdeaResultDiv = document.getElementById('trade-idea-result');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const tradeIdeaContentDiv = document.getElementById('trade-idea-content');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const tradeIdeaLoadingDiv = document.getElementById('trade-idea-loading');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>generateTradeIdeaBtn.addEventListener('click', async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>tradeIdeaResultDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>tradeIdeaLoadingDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>tradeIdeaContentDiv.innerHTML = '';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const coinName = appData.coins[state.activeCoin].name;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const prompt = `Berikan ide trading hipotetis (entry, stop-loss, take-profit, dan alasan singkat) untuk ${coinName} di pasar kripto. Anggap pasar sedang dalam tren acak. Format respons sebagai poin-poin.`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const idea = await callGeminiAPI(prompt);</p>
<p class="p1"><span class="Apple-converted-space">            </span>tradeIdeaContentDiv.innerHTML = idea;</p>
<p class="p1"><span class="Apple-converted-space">            </span>tradeIdeaLoadingDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>tradeIdeaResultDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Market Sentiment Generator</p>
<p class="p1"><span class="Apple-converted-space">        </span>const generateSentimentBtn = document.getElementById('generate-sentiment-btn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const sentimentResultDiv = document.getElementById('sentiment-result');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const sentimentContentDiv = document.getElementById('sentiment-content');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const sentimentLoadingDiv = document.getElementById('sentiment-loading');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>generateSentimentBtn.addEventListener('click', async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>sentimentResultDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>sentimentLoadingDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>sentimentContentDiv.innerHTML = '';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const coinName = appData.coins[state.activeCoin].name;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const prompt = `Berikan analisis sentimen pasar (bullish, bearish, atau netral) singkat untuk ${coinName} di pasar kripto saat ini, beserta alasan singkatnya. Anggap Anda adalah analis pasar yang menyederhanakan informasi untuk pemula.`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const sentiment = await callGeminiAPI(prompt);</p>
<p class="p1"><span class="Apple-converted-space">            </span>sentimentContentDiv.innerHTML = sentiment;</p>
<p class="p1"><span class="Apple-converted-space">            </span>sentimentLoadingDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>sentimentResultDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Ask AI Expert</p>
<p class="p1"><span class="Apple-converted-space">        </span>const askAiBtn = document.getElementById('ask-ai-btn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const aiQuestionInput = document.getElementById('ai-question-input');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const aiAnswerResultDiv = document.getElementById('ai-answer-result');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const aiAnswerContentDiv = document.getElementById('ai-answer-content');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const aiAnswerLoadingDiv = document.getElementById('ai-answer-loading');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>askAiBtn.addEventListener('click', async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const question = aiQuestionInput.value.trim();</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!question) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>aiAnswerResultDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                </span>aiAnswerResultDiv.className = "mt-4 p-4 bg-red-50 rounded-lg text-red-800";</p>
<p class="p1"><span class="Apple-converted-space">                </span>aiAnswerContentDiv.innerHTML = "Mohon masukkan pertanyaan Anda.";</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>aiAnswerResultDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>aiAnswerLoadingDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>aiAnswerContentDiv.innerHTML = '';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const prompt = `Sebagai ahli trading kripto, jelaskan "${question}" dengan bahasa yang mudah dimengerti oleh pemula berusia 14 tahun, fokus pada konsep dasar kripto. Jangan gunakan jargon yang tidak perlu.`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const answer = await callGeminiAPI(prompt);</p>
<p class="p1"><span class="Apple-converted-space">            </span>aiAnswerContentDiv.innerHTML = answer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>aiAnswerLoadingDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>aiAnswerResultDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>aiAnswerResultDiv.className = "mt-4 p-4 bg-indigo-50 rounded-lg text-indigo-800";</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Simulate Scenario</p>
<p class="p1"><span class="Apple-converted-space">        </span>const simulateScenarioBtn = document.getElementById('simulate-scenario-btn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const scenarioInput = document.getElementById('scenario-input');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const scenarioResultDiv = document.getElementById('scenario-result');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const scenarioContentDiv = document.getElementById('scenario-content');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const scenarioLoadingDiv = document.getElementById('scenario-loading');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>simulateScenarioBtn.addEventListener('click', async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const scenario = scenarioInput.value.trim();</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!scenario) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>scenarioResultDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                </span>scenarioResultDiv.className = "mt-4 p-4 bg-red-50 rounded-lg text-red-800";</p>
<p class="p1"><span class="Apple-converted-space">                </span>scenarioContentDiv.innerHTML = "Mohon masukkan skenario yang ingin disimulasikan.";</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>scenarioResultDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>scenarioLoadingDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>scenarioContentDiv.innerHTML = '';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const coinName = appData.coins[state.activeCoin].name;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const prompt = `Sebagai ahli trading kripto, jelaskan bagaimana seorang trader mungkin bereaksi dan apa yang harus diperhatikan jika "${scenario}" terjadi pada ${coinName}. Fokus pada analisis teknis dan manajemen risiko. Jelaskan dengan bahasa yang mudah dipahami pemula.`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const response = await callGeminiAPI(prompt);</p>
<p class="p1"><span class="Apple-converted-space">            </span>scenarioContentDiv.innerHTML = response;</p>
<p class="p1"><span class="Apple-converted-space">            </span>scenarioLoadingDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>scenarioResultDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>scenarioResultDiv.className = "mt-4 p-4 bg-purple-50 rounded-lg text-purple-800";</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Generate News Summary</p>
<p class="p1"><span class="Apple-converted-space">        </span>const generateNewsSummaryBtn = document.getElementById('generate-news-summary-btn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const newsSummaryResultDiv = document.getElementById('news-summary-result');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const newsSummaryContentDiv = document.getElementById('news-summary-content');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const newsSummaryLoadingDiv = document.getElementById('news-summary-loading');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>generateNewsSummaryBtn.addEventListener('click', async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>newsSummaryResultDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>newsSummaryLoadingDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>newsSummaryContentDiv.innerHTML = '';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const coinName = appData.coins[state.activeCoin].name;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const prompt = `Sebagai analis pasar kripto, berikan ringkasan berita hipotetis singkat (1-2 paragraf) yang relevan dengan ${coinName} dan jelaskan bagaimana berita tersebut dapat mempengaruhi harganya secara umum. Fokus pada dampak fundamental dan sentimen pasar. Gunakan bahasa yang mudah dipahami pemula.`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const summary = await callGeminiAPI(prompt);</p>
<p class="p1"><span class="Apple-converted-space">            </span>newsSummaryContentDiv.innerHTML = summary;</p>
<p class="p1"><span class="Apple-converted-space">            </span>newsSummaryLoadingDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>newsSummaryResultDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>newsSummaryResultDiv.className = "mt-4 p-4 bg-blue-50 rounded-lg text-blue-800";</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Explain Jargon</p>
<p class="p1"><span class="Apple-converted-space">        </span>const explainJargonBtn = document.getElementById('explain-jargon-btn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const jargonInput = document.getElementById('jargon-input');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const jargonResultDiv = document.getElementById('jargon-result');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const jargonContentDiv = document.getElementById('jargon-content');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const jargonLoadingDiv = document.getElementById('jargon-loading');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>explainJargonBtn.addEventListener('click', async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const jargon = jargonInput.value.trim();</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!jargon) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>jargonResultDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">                </span>jargonResultDiv.className = "mt-4 p-4 bg-red-50 rounded-lg text-red-800";</p>
<p class="p1"><span class="Apple-converted-space">                </span>jargonContentDiv.innerHTML = "Mohon masukkan jargon yang ingin dijelaskan.";</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>jargonResultDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>jargonLoadingDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>jargonContentDiv.innerHTML = '';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const prompt = `Jelaskan istilah kripto "${jargon}" dengan bahasa yang sangat sederhana dan mudah dimengerti oleh pemula berusia 14 tahun. Berikan analogi singkat jika memungkinkan.`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const explanation = await callGeminiAPI(prompt);</p>
<p class="p1"><span class="Apple-converted-space">            </span>jargonContentDiv.innerHTML = explanation;</p>
<p class="p1"><span class="Apple-converted-space">            </span>jargonLoadingDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>jargonResultDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>jargonResultDiv.className = "mt-4 p-4 bg-purple-50 rounded-lg text-purple-800";</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Predict Trend</p>
<p class="p1"><span class="Apple-converted-space">        </span>const predictTrendBtn = document.getElementById('predict-trend-btn');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const trendPredictionResultDiv = document.getElementById('trend-prediction-result');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const trendPredictionContentDiv = document.getElementById('trend-prediction-content');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const trendPredictionLoadingDiv = document.getElementById('trend-prediction-loading');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>predictTrendBtn.addEventListener('click', async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>trendPredictionResultDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>trendPredictionLoadingDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>trendPredictionContentDiv.innerHTML = '';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const coinName = appData.coins[state.activeCoin].name;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const prompt = `Sebagai analis pasar kripto, berikan prediksi tren jangka pendek (misalnya, bullish, bearish, atau sideways) untuk ${coinName} dan berikan alasan hipotetis yang sangat sederhana. Ingat, ini hanya untuk tujuan edukasi dan bukan nasihat finansial.`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const prediction = await callGeminiAPI(prompt);</p>
<p class="p1"><span class="Apple-converted-space">            </span>trendPredictionContentDiv.innerHTML = prediction;</p>
<p class="p1"><span class="Apple-converted-space">            </span>trendPredictionLoadingDiv.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>trendPredictionResultDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>trendPredictionResultDiv.className = "mt-4 p-4 bg-orange-50 rounded-lg text-orange-800";</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function showPatternInsightModal(pattern, type) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const modal = document.getElementById('pattern-insight-modal');</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('modal-pattern-name').textContent = pattern.name;</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('modal-pattern-desc').textContent = pattern.desc;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const illustrationContainer = document.getElementById('modal-pattern-illustration');</p>
<p class="p1"><span class="Apple-converted-space">        </span>illustrationContainer.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (type === 'candlestick' &amp;&amp; pattern.illustration) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>illustrationContainer.innerHTML = generateCandlestickIllustration(pattern.illustration);</p>
<p class="p1"><span class="Apple-converted-space">        </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// For chart patterns, we don't have a direct visual illustration in this setup,</p>
<p class="p1"><span class="Apple-converted-space">            </span>// so we can just clear it or add a placeholder.</p>
<p class="p1"><span class="Apple-converted-space">            </span>illustrationContainer.innerHTML = '&lt;p class="text-gray-500 text-sm"&gt;Ilustrasi pola grafik tidak tersedia di sini.&lt;/p&gt;';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Reset previous AI insight</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('pattern-insight-result').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('pattern-insight-loading').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('pattern-insight-content').innerHTML = '';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>modal.style.display = 'flex'; // Use flex to center the modal</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// --- SIMULATION LOGIC ---</p>
<p class="p1"><span class="Apple-converted-space">    </span>function setupSimulation() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const simCoinSelect = document.getElementById('sim-coin-select');</p>
<p class="p1"><span class="Apple-converted-space">        </span>simCoinSelect.innerHTML = Object.keys(appData.coins).filter(key =&gt; key !== 'USDT').map(key =&gt; // Exclude USDT for trading</p>
<p class="p1"><span class="Apple-converted-space">            </span>`&lt;option value="${key}" ${key === state.simulation.selectedSimCoin ? 'selected' : ''}&gt;${appData.coins[key].name} (${key})&lt;/option&gt;`</p>
<p class="p1"><span class="Apple-converted-space">        </span>).join('');</p>
<p class="p1"><span class="Apple-converted-space">        </span>simCoinSelect.addEventListener('change', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.selectedSimCoin = e.target.value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('sim-current-coin-display').textContent = e.target.value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('sim-holding-coin-display').textContent = e.target.value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('buy-coin-display').textContent = e.target.value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('sell-coin-display').textContent = e.target.value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>resetSimulation(); // Reset simulation when coin changes</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('start-sim-btn').addEventListener('click', startSimulation);</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('reset-sim-btn').addEventListener('click', resetSimulation);</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('buy-btn').addEventListener('click', buyCoin);</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('sell-btn').addEventListener('click', sellCoin);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Initial UI update for simulation section</p>
<p class="p1"><span class="Apple-converted-space">        </span>updateSimulationUI();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function startSimulation() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.active) return;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.active = true;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.balance = 10000;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.coinHoldings = {};</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.coinHoldings[state.simulation.selectedSimCoin] = 0; // Initialize holding for selected coin</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.priceHistory = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.currentPrice = 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.initialBuyPrice = 0; // Reset initial buy price</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.eventActive = false;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.eventMessage = '';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('start-sim-btn').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('reset-sim-btn').classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('sim-coin-select').disabled = true;</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('sim-pnl-info').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('sim-event-message').classList.add('hidden');</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Initialize chart</p>
<p class="p1"><span class="Apple-converted-space">        </span>const ctx = document.getElementById('simPriceChart').getContext('2d');</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.simChartInstance) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.simChartInstance.destroy();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.simChartInstance = new Chart(ctx, {</p>
<p class="p1"><span class="Apple-converted-space">            </span>type: 'bar', // Use bar type and let plugin draw candlesticks</p>
<p class="p1"><span class="Apple-converted-space">            </span>data: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>labels: [],</p>
<p class="p1"><span class="Apple-converted-space">                </span>datasets: [{</p>
<p class="p1"><span class="Apple-converted-space">                    </span>label: `Harga ${state.simulation.selectedSimCoin}`,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>data: [], // Will store OHLC objects</p>
<p class="p1"><span class="Apple-converted-space">                </span>}]</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>options: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>responsive: true,</p>
<p class="p1"><span class="Apple-converted-space">                </span>maintainAspectRatio: false,</p>
<p class="p1"><span class="Apple-converted-space">                </span>scales: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>x: {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>type: 'category', // Changed to category for candlestick plugin to work with index</p>
<p class="p1"><span class="Apple-converted-space">                        </span>labels: [], // Will be populated dynamically</p>
<p class="p1"><span class="Apple-converted-space">                        </span>display: true<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>y: { ticks: { font: { size: 10 } } }</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>plugins: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>legend: { display: false },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>tooltip: {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>mode: 'index',<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>intersect: false,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>callbacks: {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>label: function(context) {</p>
<p class="p1"><span class="Apple-converted-space">                                </span>const ohlc = context.dataset.data[context.dataIndex];</p>
<p class="p1"><span class="Apple-converted-space">                                </span>if (ohlc &amp;&amp; typeof ohlc.o !== 'undefined') {</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>return [</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>`Open: ${ohlc.o.toFixed(2)}`,</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>`High: ${ohlc.h.toFixed(2)}`,</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>`Low: ${ohlc.l.toFixed(2)}`,</p>
<p class="p1"><span class="Apple-converted-space">                                        </span>`Close: ${ohlc.c.toFixed(2)}`</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>];</p>
<p class="p1"><span class="Apple-converted-space">                                </span>}</p>
<p class="p1"><span class="Apple-converted-space">                                </span>return context.dataset.label + ': ' + context.parsed.y.toFixed(2);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>plugins: [candlestickPlugin] // Use the custom plugin</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Start price updates</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.priceInterval = setInterval(updateSimPrice, 500); // Update price every 0.5 seconds</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Start random event triggers</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.eventInterval = setInterval(triggerRandomEvent, 10000); // Check for event every 10 seconds</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>updateSimulationUI();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function resetSimulation() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>stopSimulation();</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.balance = 10000;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.coinHoldings = {};</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.coinHoldings[state.simulation.selectedSimCoin] = 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.priceHistory = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.currentPrice = 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.initialBuyPrice = 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.eventActive = false;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.eventMessage = '';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.simChartInstance) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.simChartInstance.destroy();</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.simChartInstance = null;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('start-sim-btn').classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('reset-sim-btn').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('sim-coin-select').disabled = false;</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('buy-amount').value = '';</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('sell-amount').value = '';</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('sim-pnl-info').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('sim-event-message').classList.add('hidden');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>updateSimulationUI();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function stopSimulation() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.active = false;</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.priceInterval) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>clearInterval(state.simulation.priceInterval);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.eventInterval) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>clearInterval(state.simulation.eventInterval);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.eventTimer) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>clearTimeout(state.simulation.eventTimer);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function updateSimPrice() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>let lastPrice = state.simulation.priceHistory.length &gt; 0 ? state.simulation.priceHistory[state.simulation.priceHistory.length - 1].c : (Math.random() * 50000 + 10000);</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>let open = lastPrice;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let close = open + (Math.random() - 0.5) * (open * 0.01); // Small random fluctuation</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Apply event impact</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.eventActive) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>close += state.simulation.eventMagnitude * (open * 0.05); // Larger impact</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>if (close &lt; 0.0001) close = 0.0001; // Prevent price from going too low</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>let high = Math.max(open, close) * (1 + Math.random() * 0.005); // High slightly above max(open, close)</p>
<p class="p1"><span class="Apple-converted-space">        </span>let low = Math.min(open, close) * (1 - Math.random() * 0.005); // Low slightly below min(open, close)</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.currentPrice = close; // The "current price" displayed is the latest close</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.priceHistory.push({</p>
<p class="p1"><span class="Apple-converted-space">            </span>x: Date.now(),</p>
<p class="p1"><span class="Apple-converted-space">            </span>o: open,</p>
<p class="p1"><span class="Apple-converted-space">            </span>h: high,</p>
<p class="p1"><span class="Apple-converted-space">            </span>l: low,</p>
<p class="p1"><span class="Apple-converted-space">            </span>c: close</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Keep history limited for performance</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.priceHistory.length &gt; 100) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.priceHistory.shift();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.simChartInstance) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.simChartInstance.data.labels = state.simulation.priceHistory.map(d =&gt; new Date(d.x).toLocaleTimeString());</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.simChartInstance.data.datasets[0].data = state.simulation.priceHistory; // Pass OHLC objects</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.simChartInstance.update();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>updateSimulationUI();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const eventMessages = [</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ type: 'positive', msg: (coin) =&gt; `Berita: Kemitraan besar diumumkan untuk ${coin}! Harga melonjak!` },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ type: 'positive', msg: (coin) =&gt; `Berita: Adopsi ${coin} meningkat pesat! Pasar bullish!` },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ type: 'positive', msg: (coin) =&gt; `Berita: Upgrade jaringan ${coin} berhasil! Potensi kenaikan!` },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ type: 'negative', msg: (coin) =&gt; `Berita: Regulasi baru menekan ${coin}! Harga anjlok!` },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ type: 'negative', msg: (coin) =&gt; `Berita: Peretasan di platform terkait ${coin}! Ada kepanikan jual!` },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ type: 'negative', msg: (coin) =&gt; `Berita: Whale besar menjual ${coin}! Tekanan jual tinggi!` }</p>
<p class="p1"><span class="Apple-converted-space">    </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function triggerRandomEvent() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.eventActive) return; // Don't trigger new event if one is active</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const randomChance = Math.random();</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (randomChance &lt; 0.3) { // 30% chance to trigger an event</p>
<p class="p1"><span class="Apple-converted-space">            </span>const eventIndex = Math.floor(Math.random() * eventMessages.length);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const event = eventMessages[eventIndex];</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.eventActive = true;</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.eventMagnitude = event.type === 'positive' ? (Math.random() * 0.05 + 0.02) : -(Math.random() * 0.05 + 0.02); // 2-7% impact</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.eventDuration = Math.floor(Math.random() * 5) + 5; // Event lasts 5-10 seconds (500ms * 10-20 price updates)</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.eventMessage = event.msg(appData.coins[state.simulation.selectedSimCoin].name);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('sim-event-message').textContent = state.simulation.eventMessage;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('sim-event-message').classList.remove('hidden');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Clear event after duration</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.eventTimer = setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.simulation.eventActive = false;</p>
<p class="p1"><span class="Apple-converted-space">                </span>state.simulation.eventMagnitude = 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('sim-event-message').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>}, state.simulation.eventDuration * 1000); // Convert seconds to milliseconds</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function updateSimulationUI() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('sim-balance').textContent = state.simulation.balance.toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 2, maximumFractionDigits: 2 });</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('sim-current-price').textContent = state.simulation.currentPrice.toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 2, maximumFractionDigits: 2 });</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const currentCoinHolding = state.simulation.coinHoldings[state.simulation.selectedSimCoin] || 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('sim-coin-holding').textContent = currentCoinHolding.toFixed(4);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Calculate and display PnL</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (currentCoinHolding &gt; 0 &amp;&amp; state.simulation.initialBuyPrice &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const unrealizedPnL = (state.simulation.currentPrice - state.simulation.initialBuyPrice) * currentCoinHolding;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('sim-pnl').textContent = unrealizedPnL.toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 2, maximumFractionDigits: 2 });</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('sim-pnl').className = `text-xl font-bold ${unrealizedPnL &gt;= 0 ? 'text-green-600' : 'text-red-600'}`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('sim-pnl-info').classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">        </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('sim-pnl-info').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function buyCoin() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const amountUSDT = parseFloat(document.getElementById('buy-amount').value);</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (isNaN(amountUSDT) || amountUSDT &lt;= 0) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>showAlert("Masukkan jumlah USDT yang valid untuk dibeli.");</p>
<p class="p1"><span class="Apple-converted-space">            </span>return;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (amountUSDT &gt; state.simulation.balance) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>showAlert("Saldo USDT tidak cukup.");</p>
<p class="p1"><span class="Apple-converted-space">            </span>return;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.currentPrice &lt;= 0) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>showAlert("Harga koin belum tersedia atau tidak valid.");</p>
<p class="p1"><span class="Apple-converted-space">            </span>return;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const coinAmount = amountUSDT / state.simulation.currentPrice;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.balance -= amountUSDT;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.coinHoldings[state.simulation.selectedSimCoin] += coinAmount;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Update initial buy price for PnL calculation. If already holding, average it.</p>
<p class="p1"><span class="Apple-converted-space">        </span>// This is a simplified average cost calculation for demonstration</p>
<p class="p1"><span class="Apple-converted-space">        </span>const currentHoldingBeforeBuy = (state.simulation.coinHoldings[state.simulation.selectedSimCoin] - coinAmount);</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (currentHoldingBeforeBuy &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const totalCostBefore = state.simulation.initialBuyPrice * currentHoldingBeforeBuy;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const newTotalCost = totalCostBefore + amountUSDT;</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.initialBuyPrice = newTotalCost / state.simulation.coinHoldings[state.simulation.selectedSimCoin];</p>
<p class="p1"><span class="Apple-converted-space">        </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.initialBuyPrice = state.simulation.currentPrice;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('buy-amount').value = '';</p>
<p class="p1"><span class="Apple-converted-space">        </span>updateSimulationUI();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function sellCoin() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const amountCoin = parseFloat(document.getElementById('sell-amount').value);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const currentCoinHolding = state.simulation.coinHoldings[state.simulation.selectedSimCoin] || 0;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>if (isNaN(amountCoin) || amountCoin &lt;= 0) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>showAlert("Masukkan jumlah koin yang valid untuk dijual.");</p>
<p class="p1"><span class="Apple-converted-space">            </span>return;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (amountCoin &gt; currentCoinHolding) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>showAlert("Jumlah koin tidak cukup untuk dijual.");</p>
<p class="p1"><span class="Apple-converted-space">            </span>return;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.currentPrice &lt;= 0) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>showAlert("Harga koin belum tersedia atau tidak valid.");</p>
<p class="p1"><span class="Apple-converted-space">            </span>return;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>const usdtReceived = amountCoin * state.simulation.currentPrice;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.balance += usdtReceived;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.simulation.coinHoldings[state.simulation.selectedSimCoin] -= amountCoin;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// If all coins sold, reset initialBuyPrice</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (state.simulation.coinHoldings[state.simulation.selectedSimCoin] &lt; 0.0001) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.coinHoldings[state.simulation.selectedSimCoin] = 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>state.simulation.initialBuyPrice = 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('sell-amount').value = '';</p>
<p class="p1"><span class="Apple-converted-space">        </span>updateSimulationUI();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>init();</p>
<p class="p1">});</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
